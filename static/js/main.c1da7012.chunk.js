(this.webpackJsonpeditor=this.webpackJsonpeditor||[]).push([[0],[,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(34);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n(58);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i=n(20);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=n(59);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var s=n(37);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=n(77);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var l=n(78);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=n(30);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var u=n(79);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var h=n(80);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=n(81);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var f=n(82);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var b=n(40);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var m=n(31);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var v=n(29);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var g=n(41);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var j=n(38);Object.keys(j).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===j[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}}))}))},,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=5e12-e.getTime(),n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),r="";for(;t>=1;)r=n[t-62*Math.floor(t/62)]+r,t=Math.floor(t/62);return r+=Array(5).join().split(",").map((function(){return n[Math.floor(Math.random()*n.length)]})).join("")}},,,,,,,,,function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.Score=void 0;var a=n(20);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Score=function e(t,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"confidence",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:(0,a.newId)(),f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",b=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",m=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0;r(this,e),this.sourceClaimId=t,this.scoreTreeId=n,this.parentScoreId=c,this.sourceEdgeId=s,this.reversible=o,this.pro=l,this.affects=d,this.confidence=u,this.relevance=h,this.id=p,this.priority=f,this.content=b,this.scaledWeight=m,i(this,"type","score"),i(this,"descendantCount",0),i(this,"generation",0),i(this,"fractionSimple",1),i(this,"fraction",1),i(this,"childrenAveragingWeight",1),i(this,"childrenConfidenceWeight",1),i(this,"childrenRelevanceWeight",1),i(this,"childrenWeight",1),i(this,"weight",1),i(this,"percentOfWeight",1),i(this,"proMain",!0)}},function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;t.Action=function e(t,n,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";r(this,e),this.newData=t,this.oldData=n,this.type=a,this.dataId=i,""===i&&(this.dataId=t.id)}},function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.RsData=void 0;t.RsData=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];r(this,e),this.actionsLog=t,this.items=n,this.claimEdgeIdsByParentId=a,this.claimEdgeIdsByChildId=i,this.scoreIdsBySourceId=c,this.childIdsByScoreId=s,this.ScoreTreeIds=o}},function(e,t,n){"use strict";var r=n(21),a=n(39);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.IndexReducer=function(e,t,n,i){n&&(e[t][n]||(e[t][n]=[]),-1==e[t][n].indexOf(i)&&(e=c(c({},e),{},r({},t,c(c({},e[t]),{},r({},n,[].concat(a(e[t][n]),[i])))))));return e}},,function(e,t,n){"use strict";var r=n(13);function a(e){if(void 0!==e.confidence&&void 0!==e.relevance){var t=Math.abs(e.confidence);return!e.reversible&&e.confidence<0&&(t=0),t*e.relevance}return 1}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateScore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.childScores,n=void 0===t?[]:t,i=(e.reversible,{confidence:0,relevance:1,childrenAveragingWeight:0,childrenConfidenceWeight:0,childrenRelevanceWeight:0,childrenWeight:0}),c=0;n.filter((function(e){return"confidence"===e.affects})).length<1&&(i.confidence=1,i.relevance=1,i.childrenAveragingWeight=1,i.childrenConfidenceWeight=1,i.childrenRelevanceWeight=1,i.childrenWeight=1,i.weight=1);var s,o=r(n);try{for(o.s();!(s=o.n()).done;){var l=s.value;l.weight=a(l),i.childrenAveragingWeight+=1,i.childrenConfidenceWeight+=Math.abs(l.confidence),i.childrenRelevanceWeight+=l.relevance,i.childrenWeight+=l.weight,l.weight>c&&(c=l.weight)}}catch(b){o.e(b)}finally{o.f()}var d,u=r(n);try{for(u.s();!(d=u.n()).done;){var h=d.value,p=h.pro?1:-1;if("confidence"===h.affects&&(0===i.childrenWeight?(h.percentOfWeight=0,i.confidence=0):(h.percentOfWeight=h.weight/i.childrenWeight,i.confidence+=h.percentOfWeight*h.confidence*p)),"relevance"===h.affects){var f=h.confidence;!h.reversible&&h.confidence<0&&(f=0),void 0==i.relevance&&(i.relevance=1),h.pro?i.relevance+=f:i.relevance-=f/2}h.scaledWeight=h.weight/c}}catch(b){u.e(b)}finally{u.f()}Object.is(i.confidence,-0)&&(i.confidence=0);Math.abs(i.confidence);!i.reversible&&i.confidence<0&&0;return i.weight=a(i),i.scaledWeight=i.weight,i}},,,function(e,t,n){"use strict";var r=n(2),a=n(13),i=n(28),c=n(12),s=n(27),o=n(61),l=n(63);Object.defineProperty(t,"__esModule",{value:!0}),t.RepositoryLocalPure=void 0;var d=n(31),u=n(69),h=n(70),p=n(74),f=n(75),b=n(76),m=function(e){o(n,e);var t=l(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new d.RsData;return c(this,n),(e=t.call(this,r)).rsData=r,e}return s(n,[{key:"notify",value:function(){var e=i(r.mark((function e(t){var n,i,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.rsData.actionsLog.push({actions:t}),n=a(t);try{for(n.s();!(i=n.n()).done;)c=i.value,this.rsData=(0,u.claims)(this.rsData,c),this.rsData=(0,h.claimEdges)(this.rsData,c),this.rsData=(0,f.scores)(this.rsData,c),this.rsData=(0,b.scoreTrees)(this.rsData,c)}catch(r){n.e(r)}finally{n.f()}case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(p.RepositoryLocalBase);t.RepositoryLocalPure=m},function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.Claim=void 0;var a=n(20);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Claim=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.newId)(),c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,e),this.content=t,this.id=n,this.reversible=c,i(this,"type","claim")}},,function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.ClaimEdge=void 0;var a=n(20);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.ClaimEdge=function e(t,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"confidence",s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,a.newId)(),l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";r(this,e),this.parentId=t,this.childId=n,this.affects=c,this.pro=s,this.id=o,this.priority=l,i(this,"type","claimEdge")}},function(e,t,n){"use strict";var r=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreTree=void 0;var a=n(20);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.ScoreTree=function e(t,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,a.newId)(),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;r(this,e),this.sourceClaimId=t,this.topScoreId=n,this.confidence=c,this.id=s,this.descendantCount=o,i(this,"type","scoreTree")}},,,,,,,,,,,,function(e,t,n){},,,,,function(e,t,n){"use strict";var r=n(13),a=n(12),i=n(27);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Messenger=void 0;var s=function(){function e(){var t=this;a(this,e),c(this,"subscribers",[]),c(this,"actionsLog",[]),c(this,"notify",(function(e){t.actionsLog.push(e);var n,a=r(t.subscribers);try{for(a.s();!(n=a.n()).done;){(0,n.value)(e)}}catch(i){a.e(i)}finally{a.f()}}))}return i(e,[{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){var t=this.subscribers.indexOf(e,0);t>-1&&this.subscribers.splice(t,1)}}]),e}();t.Messenger=s},function(e,t,n){"use strict";var r=n(2),a=n(13),i=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateScoreActions=function(){return f.apply(this,arguments)};var c=n(29),s=n(60),o=n(30),l=n(34),d=n(37);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return(f=i(r.mark((function e(){var t,n,i,s,u,p,f,m,g,y,O,k,I,S,C,_,E,N,M,P,D,T,B,R,A,L,F,W,V,J,z,U,H,G,X,q,Y,Z,$,K,Q,ee,te,ne,re,ae=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ae.length>0&&void 0!==ae[0]?ae[0]:{},n=t.actions,i=void 0===n?[]:n,s=t.repository,u=void 0===s?new d.RepositoryLocalPure:s,p=t.calculator,f=void 0===p?l.calculateScore:p,m=[],g=[],y=[],e.next=6,u.notify(i);case 6:O=a(i),e.prev=7,O.s();case 9:if((k=O.n()).done){e.next=62;break}if("add_claim"!=(I=k.value).type&&"modify_claim"!=I.type||g.push(I.dataId),"add_score"!=I.type){e.next=20;break}if((S=I.newData).parentScoreId){e.next=19;break}return e.next=17,u.getScore(I.dataId);case 17:(C=e.sent)&&(S=C);case 19:g.push(S.sourceClaimId);case 20:if("add_claimEdge"!=I.type&&"modify_claimEdge"!=I.type){e.next=28;break}if((_=I.newData).parentId){e.next=27;break}return e.next=25,u.getClaimEdge(I.dataId);case 25:(E=e.sent)&&(_=E);case 27:g.push(_.parentId);case 28:if("modify_claimEdge"!=I.type){e.next=58;break}return e.next=31,u.getClaimEdge(I.dataId);case 31:if(!(N=h(h({},N=e.sent),I.newData))){e.next=58;break}return I.newData,e.next=37,u.getScoresBySourceId(N.id);case 37:M=e.sent,P=a(M),e.prev=39,P.s();case 41:if((D=P.n()).done){e.next=50;break}if((T=D.value).pro==N.pro&&T.affects==N.affects&&T.priority==N.priority){e.next=48;break}return B=new o.Action({pro:N.pro,affects:N.affects,priority:N.priority},T,"modify_score",T.id),m.push(B),e.next=48,u.notify([B]);case 48:e.next=41;break;case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(39),P.e(e.t0);case 55:return e.prev=55,P.f(),e.finish(55);case 58:"delete_claimEdge"==I.type&&(R=I.oldData,g.push(R.parentId)),"add_scoreTree"==I.type&&(A=I.newData,y.push(A.id));case 60:e.next=9;break;case 62:e.next=67;break;case 64:e.prev=64,e.t1=e.catch(7),O.e(e.t1);case 67:return e.prev=67,O.f(),e.finish(67);case 70:L=0,F=g;case 71:if(!(L<F.length)){e.next=82;break}return W=F[L],e.t2=a,e.next=76,u.getScoresBySourceId(W);case 76:e.t3=e.sent,V=(0,e.t2)(e.t3);try{for(V.s();!(J=V.n()).done;)z=J.value,y.push(z.scoreTreeId)}catch(r){V.e(r)}finally{V.f()}case 79:L++,e.next=71;break;case 82:U=0,H=y;case 83:if(!(U<H.length)){e.next=131;break}return G=H[U],e.next=87,u.getScoreTree(G);case 87:if(!(X=e.sent)){e.next=128;break}return q=[],e.next=92,u.getScore(X.topScoreId);case 92:return(Y=e.sent)||((Y=new c.Score(X.sourceClaimId,X.id)).id=X.topScoreId,q.push(new o.Action(Y,void 0,"add_score"))),e.next=96,b(u,X.topScoreId,X.sourceClaimId||"",q,G);case 96:if(!(q.length>0)){e.next=99;break}return e.next=99,u.notify(q);case 99:return Z=[],e.next=102,v(u,Y,f,Z);case 102:if($=e.sent,!(q.length>0)){e.next=106;break}return e.next=106,u.notify(Z);case 106:return K=[],e.next=109,j(u,Y,K);case 109:if(!(K.length>0)){e.next=112;break}return e.next=112,u.notify(K);case 112:return Q=[],e.next=115,x(u,Y.id,Q,0);case 115:if(!(Q.length>0)){e.next=118;break}return e.next=118,u.notify(Q);case 118:return ee=[],te=h(h({},Y),{},{proMain:!0}),ee.push(new o.Action(te,void 0,"modify_score")),e.next=123,w(u,Y.id,ee,!0);case 123:if(!(ee.length>0)){e.next=126;break}return e.next=126,u.notify(ee);case 126:m.push.apply(m,q.concat(Z,K,Q,ee)),X.descendantCount!=$.descendantCount&&(ne={descendantCount:$.descendantCount},re={descendantCount:X.descendantCount},m.push(new o.Action(ne,re,"modify_scoreTree",X.id)));case 128:U++,e.next=83;break;case 131:return e.next=133,u.notify(m);case 133:return e.abrupt("return",m);case 134:case"end":return e.stop()}}),e,null,[[7,64,67,70],[39,52,55,58]])})))).apply(this,arguments)}function b(e,t,n,r,a){return m.apply(this,arguments)}function m(){return(m=i(r.mark((function e(t,n,i,s,l){var d,u,h,p,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getClaimEdgesByParentId(i);case 2:return d=e.sent,e.next=5,t.getChildrenByScoreId(n);case 5:u=e.sent,h=a(d),e.prev=7,f=r.mark((function e(){var a,i,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.value,(i=u.find((function(e){return e.sourceClaimId===a.childId})))||(d=void 0,i=new c.Score(a.childId,l,n,a.id,void 0,a.pro,a.affects,d,d,d,a.priority),s.push(new o.Action(i,void 0,"add_score",i.id))),e.next=5,b(t,i.id,a.childId,s,l);case 5:case"end":return e.stop()}}),e)})),h.s();case 10:if((p=h.n()).done){e.next=14;break}return e.delegateYield(f(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),h.e(e.t1);case 19:return e.prev=19,h.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[7,16,19,22]])})))).apply(this,arguments)}function v(e,t){return g.apply(this,arguments)}function g(){return(g=i(r.mark((function e(t,n){var i,c,d,u,p,f,b,m,g,j,y,x,O,w,k,I=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=I.length>2&&void 0!==I[2]?I[2]:l.calculateScore,c=I.length>3?I[3]:void 0,e.next=4,t.getChildrenByScoreId(n.id);case 4:d=e.sent,u=[],p=0,f=a(d),e.prev=8,f.s();case 10:if((b=f.n()).done){e.next=19;break}return m=b.value,e.next=14,v(t,m,i,c);case 14:g=e.sent,u.push(g),p+=g.descendantCount+1;case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),f.e(e.t0);case 24:return e.prev=24,f.f(),e.finish(24);case 27:j=i({childScores:u}),y=0,x=u;case 29:if(!(y<x.length)){e.next=38;break}return O=x[y],e.next=33,t.getScore(O.id);case 33:(w=e.sent)&&(0,s.hasItemChanged)(w,O)&&c.push(new o.Action(O,void 0,"modify_score"));case 35:y++,e.next=29;break;case 38:return k=h(h(h({},n),j),{},{descendantCount:p}),(0,s.hasItemChanged)(n,k)&&c.push(new o.Action(k,void 0,"modify_score")),e.abrupt("return",k);case 41:case"end":return e.stop()}}),e,null,[[8,21,24,27]])})))).apply(this,arguments)}function j(e,t,n){return y.apply(this,arguments)}function y(){return(y=i(r.mark((function e(t,n,i){var c,s,l,d,u,p,f,b,m;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==n.id||void 0==n.fraction||void 0==n.fractionSimple){e.next=27;break}return e.next=3,t.getChildrenByScoreId(n.id);case 3:c=e.sent,s=0,l=a(c);try{for(l.s();!(d=l.n()).done;)"confidence"===(u=d.value).affects&&(s+=u.relevance)}catch(r){l.e(r)}finally{l.f()}0===s&&(s=1),p=a(c),e.prev=9,p.s();case 11:if((f=p.n()).done){e.next=19;break}return b=f.value,(m=h(h({},b),{},{fractionSimple:b.relevance/s*n.fractionSimple,fraction:n.fraction*b.percentOfWeight})).fractionSimple==b.fractionSimple&&m.fraction==b.fraction||i.push(new o.Action(m,void 0,"modify_score")),e.next=17,j(t,m,i);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),p.e(e.t0);case 24:return e.prev=24,p.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[9,21,24,27]])})))).apply(this,arguments)}function x(e,t,n,r){return O.apply(this,arguments)}function O(){return(O=i(r.mark((function e(t,n,i,c){var s,l,d,u,p;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getChildrenByScoreId(n);case 2:s=e.sent,c++,l=a(s),e.prev=5,l.s();case 7:if((d=l.n()).done){e.next=14;break}return(u=d.value).generation!=c&&(p=h(h({},u),{},{generation:c}),i.push(new o.Action(p,void 0,"modify_score"))),e.next=12,x(t,u.id,i,c);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),l.e(e.t0);case 19:return e.prev=19,l.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})))).apply(this,arguments)}function w(e,t,n,r){return k.apply(this,arguments)}function k(){return(k=i(r.mark((function e(t,n,i,c){var s,l,d,u,p,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getChildrenByScoreId(n);case 2:s=e.sent,l=a(s),e.prev=4,l.s();case 6:if((d=l.n()).done){e.next=20;break}if(!0!==(u=d.value).pro){e.next=13;break}return p=h(h({},u),{},{proMain:c}),i.push(new o.Action(p,void 0,"modify_score")),e.next=13,w(t,u.id,i,c);case 13:if(!1!==u.pro){e.next=18;break}return f=h(h({},u),{},{proMain:!c}),i.push(new o.Action(f,void 0,"modify_score")),e.next=18,w(t,u.id,i,!c);case 18:e.next=6;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,22,25,28]])})))).apply(this,arguments)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasItemChanged=function(e,t){return!(JSON.stringify(e,Object.keys(e).sort())===JSON.stringify(t,Object.keys(t).sort()))},t.itemChanges=a,t.pushActionIfChanged=function(e,t,n,i,c){var s=a(t,n);s&&e.push(new r.Action(s.partialNewItem,s.partialNewItem,i,c))};var r=n(30);function a(e,t){var n={},r={};for(var a in t)t[a]!==e[a]&&(n[a]=t[a],r[a]=e[a]);for(var i in e)void 0===t[i]&&(r[i]=e[i]);return Object.keys(r).length>0?{partialNewItem:r,partialOldItem:n}:void 0}},,,,,,,,,function(e,t,n){"use strict";var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.claims=function(e,t){switch(t.type){case"add_claim":case"sync_claim":case"modify_claim":var n=e.items[t.dataId];return n||((n=new a.Claim("","")).id=t.dataId),n=c(c({},n),t.newData),c(c({},e),{},{items:c(c({},e.items),{},r({},t.dataId,n))});default:return e}};var a=n(38);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=n(13),a=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.claimEdges=function(e,t){switch(t.type){case"add_claimEdge":case"modify_claimEdge":case"sync_claimEdge":var n=e.items[t.dataId];return n||((n=new c.ClaimEdge("","")).id=t.dataId),n=o(o({},n),t.newData),e=o(o({},e),{},{items:o(o({},e.items),{},a({},t.dataId,n))}),e=(0,i.IndexReducer)(e,"claimEdgeIdsByChildId",n.childId,t.dataId),e=(0,i.IndexReducer)(e,"claimEdgeIdsByParentId",n.parentId,t.dataId);case"delete_claimEdge":var s=e.items[t.dataId];delete e.items[t.dataId],e=d(e,e.claimEdgeIdsByChildId,s.childId,t.dataId);var l,u=(e=d(e,e.claimEdgeIdsByParentId,s.parentId,t.dataId)).scoreIdsBySourceId[t.dataId],h=r(u);try{for(h.s();!(l=h.n()).done;){var p=l.value,f=e.items[p];delete e.items[p],delete e.scoreIdsBySourceId[t.dataId],delete e.childIdsByScoreId[p],f.parentScoreId&&(e=d(e,e.childIdsByScoreId,f.parentScoreId,p)),e=d(e,e.scoreIdsBySourceId,f.sourceClaimId,p)}}catch(b){h.e(b)}finally{h.f()}return e;default:return e}},t.IndexDelete=d;var i=n(32),c=n(40);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r){var a=t[n],i=a.indexOf(r,0);return i>-1&&a.splice(i,1),e}},,,,function(e,t,n){"use strict";var r=n(39),a=n(13),i=n(2),c=n(28),s=n(12),o=n(27);Object.defineProperty(t,"__esModule",{value:!0}),t.RepositoryLocalBase=void 0;var l=n(31);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l.RsData;s(this,e),this.rsData=t,d(this,"log",[])}return o(e,[{key:"getClaim",value:function(){var e=c(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rsData.items[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClaimEdge",value:function(){var e=c(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rsData.items[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScore",value:function(){var e=c(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rsData.items[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScoreTree",value:function(){var e=c(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rsData.items[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClaimEdgesByParentId",value:function(){var e=c(i.mark((function e(t){var n,r,c,s,o,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.rsData.claimEdgeIdsByParentId[t],r=[],!n){e.next=22;break}c=a(n),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=14;break}return o=s.value,e.next=10,this.getClaimEdge(o);case 10:(l=e.sent)&&r.push(l);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),c.e(e.t0);case 19:return e.prev=19,c.f(),e.finish(19);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClaimEdgesByChildId",value:function(){var e=c(i.mark((function e(t){var n,r,c,s,o,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.rsData.claimEdgeIdsByChildId[t],r=[],c=a(n),e.prev=3,c.s();case 5:if((s=c.n()).done){e.next=13;break}return o=s.value,e.next=9,this.getClaimEdge(o);case 9:(l=e.sent)&&r.push(l);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getScoresBySourceId",value:function(){var e=c(i.mark((function e(t){var n,r,c,s,o,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.rsData.scoreIdsBySourceId[t],r=[],!n){e.next=22;break}c=a(n),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=14;break}return o=s.value,e.next=10,this.getScore(o);case 10:(l=e.sent)&&r.push(l);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),c.e(e.t0);case 19:return e.prev=19,c.f(),e.finish(19);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChildrenByScoreId",value:function(){var e=c(i.mark((function e(t){var n,r,c,s,o,l;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.rsData.childIdsByScoreId[t],r=[],!n){e.next=22;break}c=a(n),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=14;break}return o=s.value,e.next=10,this.getScore(o);case 10:(l=e.sent)&&r.push(l);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),c.e(e.t0);case 19:return e.prev=19,c.f(),e.finish(19);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDescendantScoresById",value:function(){var e=c(i.mark((function e(t){var n,a,c;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,this.getChildrenByScoreId(t);case 3:a=e.sent;case 4:if(!(a.length>0)){e.next=18;break}if(!(c=a.pop())){e.next=16;break}return n.push(c),e.t0=a.push,e.t1=a,e.t2=r,e.next=13,this.getChildrenByScoreId(c.id);case 13:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 16:e.next=4;break;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLeafScoresById",value:function(){var e=c(i.mark((function e(t){var n,a,c,s;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,this.getChildrenByScoreId(t);case 3:a=e.sent;case 4:if(!(a.length>0)){e.next=14;break}if(!(c=a.pop())){e.next=12;break}return e.next=9,this.getChildrenByScoreId(c.id);case 9:0===(s=e.sent).length&&n.push(c),a.push.apply(a,r(s));case 12:e.next=4;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.RepositoryLocalBase=u},function(e,t,n){"use strict";var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.scores=function(e,t){switch(t.type){case"add_score":case"modify_score":case"sync_score":var n=e.items[t.dataId];return n||((n=new a.Score("","")).id=t.dataId),n=s(s({},n),t.newData),e=s(s({},e),{},{items:s(s({},e.items),{},r({},t.dataId,n))}),e=(0,i.IndexReducer)(e,"childIdsByScoreId",n.parentScoreId,t.dataId),e=(0,i.IndexReducer)(e,"scoreIdsBySourceId",n.sourceClaimId,t.dataId),e=(0,i.IndexReducer)(e,"scoreIdsBySourceId",n.sourceEdgeId,t.dataId);default:return e}};var a=n(29),i=n(32);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.scoreTrees=function(e,t){switch(t.type){case"add_scoreTree":case"modify_scoreTree":var n=e.items[t.dataId];return n||((n=new a.ScoreTree("","")).id=t.dataId),n=s(s({},n),t.newData),e=s(s({},e),{},{items:s(s({},e.items),{},r({},t.dataId,n))}),e=(0,i.IndexReducer)(e,"ScoreTreeIds",n.id,t.dataId);default:return e}};var a=n(41),i=n(32);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t,n){"use strict";var r=n(13);Object.defineProperty(t,"__esModule",{value:!0}),t.selectNode=function(e,t){var n,a=[];a.push({itemId:e,status:"selected"});var i=null===(n=t.items[e])||void 0===n?void 0:n.parentScoreId;for(;void 0!=i;){var c;a.push({itemId:i,status:"ancestor"}),i=null===(c=t.items[i])||void 0===c?void 0:c.parentScoreId}if(t.childIdsByScoreId[e]){var s,o=r(t.childIdsByScoreId[e]);try{for(o.s();!(s=o.n()).done;){var l=s.value;a.push({itemId:l,status:"child"})}}catch(d){o.e(d)}finally{o.f()}}return a}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(8),c=n(7),s=(n(53),n(1)),o=n.n(s),l=n(18),d=n.n(l),u=n(11),h=n(3),p=n(4),f=n(5),b=n(15),m=n(10),v=n(9),g=n(6),j=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"confidence",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(g.newId)(),c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";Object(p.a)(this,e),this.parentId=t,this.childId=n,this.affects=r,this.pro=a,this.id=i,this.priority=c,this.type="claimEdge",this.checked=void 0},y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(g.newId)(),r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(p.a)(this,e),this.content=t,this.id=n,this.reversible=r,this.type="claim",this.labelMin="",this.labelMid="",this.labelMax="",this.priority=""},x=n(0),O=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=[];r.state.pasteClaim&&r.state.claimEdge?r.state.claimEdge&&(r.state.claimEdge.childId=r.state.pasteClaim,e.push(new g.Action(r.state.claimEdge,void 0,"add_claimEdge"))):(e.push(new g.Action(r.state.claim,void 0,r.props.new?"add_claim":"modify_claim")),r.state.claimEdge&&e.push(new g.Action(r.state.claimEdge,void 0,r.props.new?"add_claimEdge":"modify_claimEdge")));Object(g.calculateScoreActions)({actions:e,repository:r.props.repository}).then(function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.props.messenger.notify(e.concat(n));case 2:r.props.handleEditClose();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},r.handleText=function(e){var t=e.currentTarget.id.split("."),n=r.state;if(2===t.length)r.setState(Object(u.a)({},t[0],Object(h.a)(Object(h.a)({},n[t[0]]),{},Object(u.a)({},t[1],e.currentTarget.value))));else{if(1!==t.length)throw new Error("id expectes 1 or 2 items in path. "+t.length+" were received.");r.setState(Object(u.a)({},t[0],e.currentTarget.value))}},r.handlePriority=function(e){r.setState({claimEdge:Object(h.a)(Object(h.a)({},r.state.claimEdge),{},{priority:e.currentTarget.value})})},r.handlePasteClaim=function(e){r.setState({pasteClaim:e.currentTarget.value})},r.handlePro=function(e){var t=r.props.proMainContext?e.currentTarget.checked:!e.currentTarget.checked;r.setState({claimEdge:Object(h.a)(Object(h.a)({},r.state.claimEdge),{},{pro:e.currentTarget.checked}),proMain:t})},r.handleProMain=function(e){var t=r.props.proMainContext?e.currentTarget.checked:!e.currentTarget.checked;r.setState({claimEdge:Object(h.a)(Object(h.a)({},r.state.claimEdge),{},{pro:t}),proMain:e.currentTarget.checked})},r.handleDelete=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.state.claimEdge&&((t=[]).push(new g.Action(void 0,r.state.claimEdge,"delete_claimEdge",r.state.claimEdge.id)),Object(g.calculateScoreActions)({actions:t,repository:r.props.repository}).then(function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.messenger.notify(t.concat(n));case 2:r.props.handleEditClose();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),r.handleCancel=function(){r.props.handleEditClose()},r.state={proMain:!0,pasteClaim:""},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!this.props.new){e.next=6;break}t.claim=new y,t.claimEdge=new j(this.props.claimId,t.claim.id),e.next=11;break;case 6:return e.next=8,this.props.repository.getClaim(this.props.claimId);case 8:(n=e.sent)&&(t.claim=n),this.props.claimEdge&&(t.claimEdge=JSON.parse(JSON.stringify(this.props.claimEdge)));case 11:t.claimEdge&&(t.proMain=this.props.proMainContext?t.claimEdge.pro:!t.claimEdge.pro),t.claim&&(void 0===t.claim.labelMin&&(t.claim.labelMin=""),void 0===t.claim.labelMid&&(t.claim.labelMid=""),void 0===t.claim.labelMax&&(t.claim.labelMax=""),t.claimEdge&&void 0===t.claimEdge.priority&&(t.claim.priority="")),this.setState(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:this.state.claim&&Object(x.jsxs)("form",{className:"container",children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"claim.content",children:"Content"}),Object(x.jsx)("textarea",{className:"form-control",id:"claim.content",value:this.state.claim.content,onChange:this.handleText,rows:2}),Object(x.jsxs)("small",{className:"form-text text-muted",children:["For hyperlinks us ",Object(x.jsx)("a",{href:"https://commonmark.org/help/",children:"commonMark"})," syntax: This is [an example](http://example.com/) inline link."]})]}),Object(x.jsxs)("div",{className:"form-row  edit-lines",children:[Object(x.jsxs)("div",{className:"form-group col-4",children:[Object(x.jsx)("label",{htmlFor:"claim.labelMin",children:"Minimum Value Label"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"claim.labelMin",value:this.state.claim.labelMin,onChange:this.handleText})]}),Object(x.jsxs)("div",{className:"form-group col-4",children:[Object(x.jsx)("label",{htmlFor:"claim.labelMid",children:"Middle Value Label"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"claim.labelMid",value:this.state.claim.labelMid,onChange:this.handleText})]}),Object(x.jsxs)("div",{className:"form-group col-4",children:[Object(x.jsx)("label",{htmlFor:"claim.labelMax",children:"Maximum Value Label"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"claim.labelMax",value:this.state.claim.labelMax,onChange:this.handleText})]})]}),this.state.claimEdge&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"form-row",children:[Object(x.jsx)("div",{className:"form-group col-xs-4 mr-4",children:Object(x.jsxs)("div",{className:"form-check",children:[Object(x.jsx)("input",{className:"form-check-input",type:"checkbox",id:"claimEdge.pro",checked:this.state.claimEdge.pro,onChange:this.handlePro}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"claimEdge.pro",children:"Pro Parent"})]})}),Object(x.jsx)("div",{className:"form-group col-xs-4",children:Object(x.jsxs)("div",{className:"form-check",children:[Object(x.jsx)("input",{className:"form-check-input",type:"checkbox",id:"proMain",checked:this.state.proMain,onChange:this.handleProMain}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"proMain",children:"Pro Main"})]})})]}),Object(x.jsxs)("div",{className:"form-row",children:[Object(x.jsxs)("div",{className:"form-group col-xs-4",children:[Object(x.jsx)("label",{htmlFor:"claimEdge.affects",children:"Affects"}),Object(x.jsxs)("select",{className:"form-control",id:"claimEdge.affects",value:this.state.claimEdge.affects,onChange:this.handleText,children:[Object(x.jsx)("option",{value:"confidence",children:"Confidence"}),Object(x.jsx)("option",{value:"relevance",children:"Relevance"})]})]}),Object(x.jsxs)("div",{className:"form-group col-xs-4",children:[Object(x.jsx)("label",{htmlFor:"claimEdge.priority",children:"Priority"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"claimEdge.priority",value:this.state.claimEdge.priority,onChange:this.handlePriority})]}),Object(x.jsxs)("div",{className:"form-group col-xs-4",children:[Object(x.jsx)("label",{htmlFor:"pasteClaim",children:"Paste Claim"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"pasteClaim",value:this.state.pasteClaim,onChange:this.handlePasteClaim})]})]})]}),Object(x.jsxs)("div",{className:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups",children:[Object(x.jsx)("div",{className:"btn-group mr-3",role:"group","aria-label":"Save Locally",children:Object(x.jsx)("button",{type:"button",value:"Save Locally",className:"btn btn-primary",onClick:this.handleSubmit,children:"Save Locally"})}),Object(x.jsx)("div",{className:"btn-group mr-3",role:"group","aria-label":"Cancel",children:Object(x.jsx)("button",{type:"button",value:"Cancel",className:"btn btn-secondary",onClick:this.handleCancel,children:"Cancel"})}),this.props.claimEdge&&Object(x.jsx)("div",{className:"btn-group ml-5",role:"group","aria-label":"Delete",children:Object(x.jsx)("button",{type:"button",value:"Delete",className:"btn btn btn-outline-danger",onClick:this.handleDelete,children:"Delete"})})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"form-row",children:[Object(x.jsxs)("div",{className:"form-group col-6",children:[Object(x.jsx)("label",{htmlFor:"claim.claimId",children:"Claim ID"}),Object(x.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"claim.claimId",value:this.state.claim.id,onChange:this.handleText})]}),Object(x.jsxs)("div",{className:"form-group col-6",children:[Object(x.jsx)("label",{htmlFor:"claim.scoreId",children:"Score ID"}),Object(x.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"claim.scoreId",value:this.props.scoreId,onChange:this.handleText})]})]})]})})}}]),n}(o.a.Component),w=n(93),k=n(94);function I(e,t,n){var r,a=Object(g.selectNode)(e,t),c=window.document.getElementsByClassName("expander2"),s=Object(i.a)(c);try{var o=function(){var e=r.value,t=window.document.getElementById(e.id.replace("expander2","expander3")),i=a.find((function(t){return t.itemId===e.id.substring(10,100)}));i?"selected"===i.status?(e.checked=!0,t.checked=!0):"ancestor"!==i.status||(null===n||void 0===n?void 0:n.selectedOnly)?(e.checked=!1,t.checked=!1):(e.checked=!1,t.checked=!0):(e.checked=!1,t.checked=!1)};for(s.s();!(r=s.n()).done;)o()}catch(l){s.e(l)}finally{s.f()}}n(84);var S=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.percentage;return e>0&&e<4&&(e=4),e>95&&(e=95),Object(x.jsx)("div",{className:"rs-bucket",children:Object(x.jsx)("div",{className:"rs-bucket-fill",style:{height:"".concat(e,"%")}})})}}]),n}(o.a.Component);function C(){}C.prototype.render=function(e){var t,n,r=e.walker();for(this.buffer="",this.lastOut="\n";t=r.next();)this[n=t.node.type]&&this[n](t.node,t.entering);return this.buffer},C.prototype.out=function(e){this.lit(e)},C.prototype.lit=function(e){this.buffer+=e,this.lastOut=e},C.prototype.cr=function(){"\n"!==this.lastOut&&this.lit("\n")},C.prototype.esc=function(e){return e};var _=C;function E(e){e=e||{}}E.prototype=Object.create(_.prototype),E.prototype.text=function(e){this.out(e.literal)},E.prototype.html_inline=function(e){},E.prototype.html_block=function(e){},E.prototype.softbreak=function(){},E.prototype.linebreak=function(){this.cr()},E.prototype.link=function(e,t){},E.prototype.image=function(e,t){},E.prototype.emph=function(e,t){},E.prototype.strong=function(e,t){},E.prototype.paragraph=function(e,t){var n=e.parent.parent;null!==n&&"list"===n.type&&n.listTight||this.cr()},E.prototype.heading=function(e,t){this.cr()},E.prototype.code=function(e){this.out(e.literal)},E.prototype.code_block=function(e){this.cr(),this.out(e.literal),this.cr()},E.prototype.thematic_break=function(e){this.cr(),this.out("------"),this.cr()},E.prototype.block_quote=function(e,t){this.cr()},E.prototype.list=function(e,t){t?(this.lit("\u2022 "),this.cr()):this.cr()},E.prototype.item=function(e,t){t||this.cr()},E.prototype.custom_inline=function(e,t){},E.prototype.custom_block=function(e,t){},E.prototype.out=function(e){this.lit(e)};var N=E,M=n(47),P=n.n(M),D=n(46);function T(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=P.a.render(e.content,{score:t,claim:e,fractionalizedScore:r,sign:a}),s=new D.Parser({});n=i?new N:new D.HtmlRenderer({safe:!0});var o=s.parse(c),l=n.render(o);return{__html:l=l.replace(/href="/g,' target="_blank" rel="noopener noreferrer"  href="')}}n(46);var B=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).handleChildrenVisible=function(){I(r.state.score.id,r.props.repository.rsData,r.props.settings)},r.handleDataDispatch=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,s,o,l,d,u,p,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(i.a)(t),e.prev=1,n.s();case 3:if((c=n.n()).done){e.next=23;break}if(s=c.value,o=s.newData,l=s.type,d=s.dataId,u=s.oldData,p={},"modify_claim"===l&&d===r.state.claim.id&&(p.claim=Object(h.a)(Object(h.a)({},r.state.claim),o)),"modify_claimEdge"===l&&r.state.claimEdge&&d===r.state.claimEdge.id&&(p.claimEdge=Object(h.a)(Object(h.a)({},r.state.claimEdge),o)),"delete_claimEdge"!==l||u.parentId!==r.state.claim.id){e.next=13;break}return e.next=12,r.props.repository.getChildrenByScoreId(r.state.score.id);case 12:p.childScores=e.sent;case 13:if("modify_score"===l&&d===r.state.score.id&&(p.score=Object(h.a)(Object(h.a)({},r.state.score),o)),"add_score"!==l||o.parentScoreId!==r.state.score.id){e.next=20;break}return!1===r.state.childrenVisible&&(p.childrenVisible=!0),e.next=18,r.props.repository.getChildrenByScoreId(r.state.score.id);case 18:f=e.sent,p.childScores=f;case 20:r.setState(p);case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),n.e(e.t0);case 28:return e.prev=28,n.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[1,25,28,31]])})));return function(t){return e.apply(this,arguments)}}(),r.handleEditButtonClick=function(){r.setState({editorVisible:!r.state.editorVisible,addMode:!1})},r.handleAddButtonClick=function(){r.setState({addMode:!0,editorVisible:!r.state.editorVisible})},r.handleEditClose=function(){r.setState({editorVisible:!1})},r.state={childrenVisible:!1,editorVisible:!1,addMode:!1,score:new g.Score("",""),claim:new y,childScores:[],claimEdge:void 0},r.state.score.confidence=.5,r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.repository.getScore(this.props.scoreId);case 2:if(t=e.sent,n=new y,!t){e.next=17;break}if(!t.sourceEdgeId){e.next=9;break}return e.next=8,this.props.repository.getClaimEdge(t.sourceEdgeId);case 8:r=e.sent;case 9:return e.next=11,this.props.repository.getClaim(t.sourceClaimId);case 11:return i=e.sent,e.next=14,this.props.repository.getChildrenByScoreId(t.id);case 14:c=e.sent,i&&(n=i),this.setState({score:t,claim:n,childScores:c,claimEdge:r});case 17:this.props.messenger.subscribe(this.handleDataDispatch);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.messenger.unsubscribe(this.handleDataDispatch)}},{key:"render",value:function(){var e=this.props,t=this.state.score,r=this.state.claim,a=this.state.childScores,c=e.proMainContext,s=Math.round(100*t.confidence),o="".concat(s,"%"),l=this.props.settings,d=t.confidence,u="",h="";t&&(t.pro||(c=!c),!r.reversible&&t.confidence<0&&(d=0),s=Math.round(d*t.relevance*100),"relevance"===t.affects?(h=t.pro?"X":"\xf7",o="".concat((t.relevance+1).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1}))):(100===s&&(s=99),o="".concat(s.toString().padStart(2," "),"%")));var p="";if(l.scoreDescriptions)if("relevance"===t.affects)p="Importance",p=t.pro?"Increases "+p:"Decreases "+p;else{var f,b="";t.parentScoreId?(f=l.scoreDescriptions.impact,b=c?" Pro":" Con"):f=l.scoreDescriptions.result;var m,v=Object(i.a)(f);try{for(v.s();!(m=v.n()).done;){var g=m.value;t.confidence*t.relevance>=g.min&&(p=g.desc)}}catch(E){v.e(E)}finally{v.f()}p+=b+": "}a.length||(p="Assumed "+p);var j="";this.state.score.descendantCount>0&&(j=" based on "+this.state.score.descendantCount+" claim",this.state.score.descendantCount>1&&(j+="s"),j+=".");var y=a;a.length>1&&(y=a.sort((function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:e.descendantCount>t.descendantCount?1:t.descendantCount>e.descendantCount?-1:e.confidence>t.confidence?1:t.confidence>e.confidence?-1:0})));var I=c?"pro":"con";"relevance"===t.affects?(h=t.pro?"X":"\xf7",u+="".concat((t.relevance+1).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1}))):("100"===(u=Math.abs(100*t.fraction-(1-t.confidence)*t.fraction*100).toFixed(0))&&(u="99"),h=t.parentScoreId?c?"+":"-":t.confidence<0?"-":" ");var C=new URL(window.location.toString());C.searchParams.set("s",t.id);var _="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(C.toString()),"%20%40GulliBot");return Object(x.jsxs)("div",{className:"claim-outer",children:[Object(x.jsx)("input",{id:"expander2-"+t.id,type:"checkbox",className:"expander2",onChange:this.handleChildrenVisible}),Object(x.jsx)("input",{id:"expander3-"+t.id,type:"checkbox",className:"expander3"}),Object(x.jsx)("div",{className:"claim-hider"+(t.parentScoreId?"":" mainclaim"),children:Object(x.jsxs)("div",{className:"claim "+I,children:[a.length>0&&Object(x.jsx)("div",{id:"expander-"+this.state.score.id,className:"expander"+(this.state.childrenVisible?" expanded":" collapsed"),children:Object(x.jsx)("svg",{width:"20px",height:"20px",children:Object(x.jsx)("use",{href:"#expander"})})}),Object(x.jsxs)("div",{className:"claim-inner",children:[Object(x.jsxs)("div",{className:"lines",children:[Object(x.jsx)("span",{className:"min",title:r.labelMin,children:r.labelMin}),Object(x.jsx)("span",{className:"mid",title:r.labelMid,children:r.labelMid}),Object(x.jsx)("span",{className:"max",title:r.labelMax,children:r.labelMax}),Object(x.jsxs)("div",{className:"lines-inner",children:[Object(x.jsx)("svg",{className:"lines-pointer",style:{left:100*(c?(d+1)/2:1-(d+1)/2)+"%"},height:"20",width:"20",viewBox:"0 0 10 10",children:Object(x.jsx)("path",{d:"M 9,3 C 9,6 6,5 5,10 4,5 1,6 1,3 1,1 3,0 5,0 7,0 9,1 9,3 Z"})}),Object(x.jsx)("div",{className:"tic",style:{left:"0%"}}),Object(x.jsx)("div",{className:"tic",style:{left:"33.3%"}}),Object(x.jsx)("div",{className:"tic",style:{left:"66.6%"}}),Object(x.jsx)("div",{className:"tic",style:{left:"100%"}})]})]}),Object(x.jsx)("label",{htmlFor:"expander2-"+t.id,className:"numbers",title:p+j,children:Object(x.jsxs)("span",{className:"number",children:[(l.showFractionalized||l.showScore||l.showBucket)&&" "!=h?Object(x.jsx)("span",{className:"sign",children:h}):"",l.showFractionSimple?Math.round(100*t.fractionSimple).toString().padStart(2," ")+"%|":"",l.showFractionalized?u.padStart(2," ")+"%|":"",l.showScore?o:"",l.showBucket?Object(x.jsx)(S,{percentage:100*t.scaledWeight}):""]})}),Object(x.jsx)("span",{className:"score-description",title:o+"% confidence based on "+j,children:p+j}),Object(x.jsx)("span",{className:"rs-content",dangerouslySetInnerHTML:T(r,t,u,h)}),Object(x.jsx)("label",{className:"more-info",htmlFor:"expander2-"+t.id,children:"More info\u2026"})]}),Object(x.jsx)("svg",{className:"callout",width:"30px",height:"30px",children:Object(x.jsx)("use",{href:"#callout"})})]})}),Object(x.jsxs)("div",{className:"scoreInfo",children:[Object(x.jsxs)("span",{className:"editable",children:[p+j,Object(x.jsx)("button",{onClick:this.handleEditButtonClick,className:"btn-inline",children:"edit this claim"}),Object(x.jsx)("button",{onClick:this.handleAddButtonClick,className:"btn-inline",children:"add a pro or con"})]}),0===a.length?Object(x.jsxs)("p",{children:["I assume this claim is 100% accurate because I have not been given a reason to doubt it yet. I am gullible. If you feel this claim is incorrect please give me your specific reasons and evidence on ",Object(x.jsx)("a",{target:"_blank",href:_,children:"Twitter"}),"\xa0 or ",Object(x.jsx)("a",{target:"_blank",href:"https://www.freesuggestionbox.com/pub/djfbumi",children:"anonymously"}),". ",Object(x.jsx)("a",{target:"_blank",href:"https://GulliBot.com/score",children:"How I score claims"}),"."]}):Object(x.jsx)("p",{style:{marginBottom:"0"},children:Object(x.jsx)("a",{target:"_blank",href:_,children:"Tweet about this claim ^^"})}),t.scaledWeight<t.weight?Object(x.jsx)("p",{children:"This claim has a lower impact because other claims in this section have a higher importance. Look at the claims with higher impact to see why they are more important."}):""]}),Object(x.jsx)(w.a,{in:this.state.editorVisible,timeout:490,classNames:"editor",children:Object(x.jsx)("div",{children:this.state.editorVisible&&Object(x.jsx)(O,{claimId:r.id,repository:e.repository,claimEdge:this.state.claimEdge,proMainContext:this.state.addMode?c:e.proMainContext,handleEditClose:this.handleEditClose,messenger:e.messenger,new:this.state.addMode,scoreId:this.state.score.id})})}),Object(x.jsx)("ul",{id:"children-"+this.state.score.id,className:"children "+(this.state.childrenVisible?"":"hide"),children:Object(x.jsx)(k.a,{component:null,children:0===a.length?"":y.map((function(t){return Object(x.jsx)(w.a,{timeout:5e3,classNames:"score",children:Object(x.jsx)("li",{children:Object(x.jsx)(n,{scoreId:t.id,repository:e.repository,proMainContext:c,messenger:e.messenger,settings:e.settings,scoreTree:e.scoreTree})},t.id)},t.id)}))})})]})}}]),n}(o.a.Component),R=n(25),A=(n(91),n(49)),L=function(){function e(t,n,r,a){Object(p.a)(this,e),this.m_container=void 0,this.m_defaultClassName=void 0,this.m_defaultCaseSensitivity=void 0,this.m_highlightTokens=void 0,this.iterator=this.iterator.bind(this),this.checkAndReplace=this.checkAndReplace.bind(this),this.highlight=this.highlight.bind(this),this.highlightNode=this.highlightNode.bind(this),this.m_container=t,this.m_defaultClassName=r||"highlight",this.m_defaultCaseSensitivity=a||!1,this.m_highlightTokens=n||[{token:"test",className:this.m_defaultClassName,sensitiveSearch:this.m_defaultCaseSensitivity}]}return Object(f.a)(e,[{key:"checkAndReplace",value:function(e){for(var t=e.nodeValue,n=e.parentNode,r=null,a=0,i=this.m_highlightTokens.length;a<i;a++)for(var c=this.m_highlightTokens[a],s=c.token,o=c.className||this.m_defaultClassName,l=c.sensitiveSearch||this.m_defaultCaseSensitivity,d=!0;;){var u=l?t.indexOf(s):t.toLowerCase().indexOf(s.toLowerCase());if(u<0){if(d)break;t&&(r=document.createTextNode(t),n.insertBefore(r,e)),n.removeChild(e);break}d=!1;var h=t.substring(0,u),p=t.substr(u,s.length);h&&(r=document.createTextNode(h),n.insertBefore(r,e));var f=document.createElement("span");f.classList.contains(o)||f.classList.add(o),f.appendChild(document.createTextNode(p)),n.insertBefore(f,e),t=t.substring(u+s.length)}}},{key:"iterator",value:function(e){if(null!=e){var t=Array.prototype.slice.call(e.childNodes);if(t.length)for(var n=0;n<t.length;n++){var r=t[n];r.nodeType===Node.TEXT_NODE?this.checkAndReplace(r):r.nodeType===Node.ELEMENT_NODE&&this.iterator(r)}}}},{key:"highlightNode",value:function(e){this.iterator(e)}},{key:"highlight",value:function(){this.iterator(this.m_container)}}]),e}(),F=new A.a([],{includeScore:!0,shouldSort:!0,includeMatches:!0,findAllMatches:!1,minMatchCharLength:3,useExtendedSearch:!0,ignoreLocation:!0,keys:["content"]}),W=!1,V=function(e){var t=e.repository,n=e.mainScoreId,r=Object(s.useState)(""),o=Object(R.a)(r,2),l=o[0],d=o[1],u=Object(s.useState)([]),h=Object(R.a)(u,2),p=h[0],f=h[1],b=Object(s.useState)(.5),m=Object(R.a)(b,2),v=m[0],g=m[1],j=function(){var e=Object(c.a)(a.a.mark((function e(r){var c,s,o,l,u,h,b,m,v,j,y,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.currentTarget.value,d(c),W){e.next=27;break}return W=!0,e.t0=i.a,e.next=7,t.getDescendantScoresById(n);case 7:e.t1=e.sent,s=(0,e.t0)(e.t1),e.prev=9,s.s();case 11:if((o=s.n()).done){e.next=19;break}return l=o.value,e.next=15,t.getClaim(l.sourceClaimId);case 15:(u=e.sent)&&F.add({id:u.id,content:u.content});case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(9),s.e(e.t2);case 24:return e.prev=24,s.f(),e.finish(24);case 27:if(!(c.length>2)){e.next=58;break}h=[],b=F.search({content:c}),m=Object(i.a)(b),e.prev=31,m.s();case 33:if((v=m.n()).done){e.next=46;break}if((j=v.value).foundWord=O(j.matches,c),!(j.score<.82)){e.next=44;break}return e.next=39,t.getClaim(j.item.id);case 39:return y=e.sent,e.next=42,t.getScoresBySourceId(j.item.id);case 42:x=e.sent[0],y&&x&&h.push({claim:y,score:x,searchResult:j});case 44:e.next=33;break;case 46:e.next=51;break;case 48:e.prev=48,e.t3=e.catch(31),m.e(e.t3);case 51:return e.prev=51,m.f(),e.finish(51);case 54:f(h),g(Math.random()),e.next=59;break;case 58:p.length&&f([]);case 59:case"end":return e.stop()}}),e,null,[[9,21,24,27],[31,48,51,54]])})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var n;I(e,t.rsData,{}),null===(n=document.getElementById("children-"+e))||void 0===n||n.scrollIntoView()},O=function(e,t){var n,r="",a=100,c=Object(i.a)(e);try{for(c.s();!(n=c.n()).done;){var s,o=n.value,l=Object(i.a)(o.indices);try{for(l.s();!(s=l.n()).done;){var d=s.value,u=o.value.substring(d[0],d[1]+1);if(u===t)return u;var h=Math.abs(u.length-t.length);h<a&&(r=u,a=h)}}catch(p){l.e(p)}finally{l.f()}}}catch(p){c.e(p)}finally{c.f()}return r};return Object(s.useEffect)((function(){var e,t=document.querySelectorAll("[data-highlight]"),n=Object(i.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;new L(r,[{token:r.getAttribute("data-highlight")||"",className:"highlight",sensitiveSearch:!1}]).highlight()}}catch(a){n.e(a)}finally{n.f()}})),Object(x.jsxs)("div",{className:"search",children:[Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(x.jsx)("div",{className:"form-row ",children:Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"searchBox",children:"Search this analysis"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"searchBox",value:l,onChange:j})]})})}),Object(x.jsx)("div",{className:"search-results-hider"+(p.length?" hidden":""),children:Object(x.jsx)("div",{className:"searchResults",children:Object(x.jsx)(k.a,{component:null,children:p&&p.map((function(e,t){var n=e.claim,r=e.score,a=e.searchResult;return Object(x.jsx)(w.a,{timeout:500,classNames:"searchitem",children:Object(x.jsxs)("div",{className:"search-result","data-highlight":a.foundWord,onClick:function(){return y(r.id)},children:[t?Object(x.jsx)("hr",{}):"",Object(x.jsx)("span",{className:"rs-content",dangerouslySetInnerHTML:{__html:T(n,r,void 0,void 0).__html+'<span style="display:none">'.concat(v,"</span>")}}),"\xa0",Object(x.jsx)("a",{className:"searchMoreInfo",onClick:function(){return y(r.id)},target:"_blank",children:"More Info\u2026"}),"\xa0\xa0",Object(x.jsxs)("small",{style:{opacity:.2},children:[100-Math.round(100*a.score),"%"]})]})},n.id)}))})})})]})},J=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).handleDataDispatch=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,s,o,l,d,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(i.a)(t);try{for(n.s();!(c=n.n()).done;)o=c.value,l=o.newData,d=o.type,u=o.dataId,p={},"modify_scoreTree"===d&&u===(null===(s=r.state.scoreTree)||void 0===s?void 0:s.id)&&(p.scoreTree=Object(h.a)(Object(h.a)({},r.state.scoreTree),l)),r.setState(p)}catch(a){n.e(a)}finally{n.f()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleSave=Object(c.a)(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.getRsDataCleanedForTransfer(),e.prev=1,e.next=4,window.RsDatabase.doc(r.state.settings.dbCollection).set(t);case 4:n={tempVisualLog:"".concat(Date(),": Document successfully written!")},r.setState(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),i={tempVisualLog:"".concat(Date(),": Error writing document:").concat(e.t0)},r.setState(i);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),r.getRsDataCleanedForTransfer=function(){var e=JSON.parse(JSON.stringify(r.props.repository.rsData));return e.actionsLog=[],e},r.getVizualExport=Object(c.a)(a.a.mark((function e(){var t,n,c,s,o,l,d,u,h,p,f,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],c="",!(null===(t=r.state.scoreTree)||void 0===t?void 0:t.topScoreId)){e.next=36;break}return e.next=5,r.props.repository.getDescendantScoresById(r.state.scoreTree.topScoreId);case 5:return s=e.sent,e.next=8,r.props.repository.getScore(r.state.scoreTree.topScoreId);case 8:(o=e.sent)&&s.unshift(o),l=Object(i.a)(s),e.prev=11,l.s();case 13:if((d=l.n()).done){e.next=24;break}return u=d.value,e.next=17,r.props.repository.getClaim(u.sourceClaimId);case 17:if(e.t0=e.sent,e.t0){e.next=20;break}e.t0={};case 20:h=e.t0,n.push({generation:u.generation,id:r.shortId(u.id),parentId:r.shortId(u.parentScoreId),confidence:Math.max(0,Math.round(100*u.confidence)),pro:u.proMain?"pro":"con",content:'"'+T(h,u,"","",!0).__html.slice(0,300).replaceAll("\r","").replaceAll("\n","").replaceAll('"',"'")+'"'});case 22:e.next=13;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(11),l.e(e.t1);case 29:return e.prev=29,l.f(),e.finish(29);case 32:c+=Object.keys(n[0]).join(","),c+="\r\n",p=Object(i.a)(n);try{for(p.s();!(f=p.n()).done;)b=f.value,c+=Object.values(b).join(","),c+="\r\n"}catch(a){p.e(a)}finally{p.f()}case 36:return e.abrupt("return",c);case 37:case"end":return e.stop()}}),e,null,[[11,26,29,32]])}))),r.shortId=function(){var e={},t=1;return function(n){if(null!==n)return e[n]||(e[n]=t,t++),e[n]}}(),r.handleUpload=function(){var e=document.createElement("div");e.innerHTML='<input type="file">';var t=e.firstChild,n=Object(b.a)(r);t&&(t.addEventListener("change",(function(){if(t.files){var e=t.files[0];if(e.name.match(/\.(txt|json)$/)){var r=new FileReader;r.onload=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.repository.rsData=JSON.parse(r.result),t=n.state.scoreTree,n.setState({scoreTree:void 0}),e.next=5,Object(g.calculateScoreActions)({actions:[new g.Action(t,void 0,"add_scoreTree")],repository:n.props.repository}).then((function(e){setTimeout((function(){n.setState({scoreTree:t})}),100)}));case 5:case"end":return e.stop()}}),e)}))),r.readAsText(e)}else alert("File not supported, .txt or .json files only")}})),t.click())},r.download=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.showSaveFilePicker){e.next=13;break}return e.next=3,window.showSaveFilePicker();case 3:return r=e.sent,e.next=6,r.createWritable(t);case 6:return i=e.sent,e.next=9,i.write();case 9:return e.next=11,i.close();case 11:e.next=14;break;case 13:window.confirm("Please use Chrome version 91 or above to download large files. Do you want to attepmt anyay?")&&((c=document.createElement("a")).href="data:text/csv;charset=utf-8,"+encodeURI(t),c.target="_blank",c.download=n,c.click());case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.handleDownload=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.download(JSON.stringify(r.getRsDataCleanedForTransfer()),"rsData.json");case 1:case"end":return e.stop()}}),e)}))),r.handleExport=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,r.getVizualExport();case 3:e.t1=e.sent,e.t0.download.call(e.t0,e.t1,"GulliViz.csv");case 5:case"end":return e.stop()}}),e)}))),r.toggleSettings=function(){r.setState({settingsOpen:!r.state.settingsOpen})},r.handleSetting=function(e,t){r.setState(Object(h.a)(Object(h.a)({},r.state),{},{settings:Object(h.a)(Object(h.a)({},r.state.settings),{},Object(u.a)({},e,t.currentTarget.checked))}))},r.state={settings:Object(h.a)(Object(h.a)({},{numbers:!1,showFractionalized:!1,showScore:!1,showBucket:!0,lines:!0,hideMainScore:!1,search:!0,scoreDescriptions:{impact:[{min:-10,desc:"Myth"},{min:-.1,desc:"Unsupported"},{min:.1,desc:"Weak"},{min:.5,desc:""},{min:.9,desc:"Srong"},{min:1.1,desc:"Very Srong"}],result:[{min:-10,desc:"Myth"},{min:-.1,desc:"Unsupported"},{min:.1,desc:"Possible"},{min:.5,desc:"Likely"},{min:.9,desc:"Probable"},{min:1.1,desc:"Probable"}]}}),r.props.settings),settingsOpen:!1,scoreTree:void 0,tempVisualLog:""},r}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.repository.getScoreTree(this.props.scoreTreeId);case 2:t=e.sent,this.setState({scoreTree:t}),this.props.messenger.subscribe(this.handleDataDispatch),setTimeout((function(){n.props.selectId?I(n.props.selectId,n.props.repository.rsData,n.state.settings):!n.props.settings.startClosed&&t&&I(t.topScoreId,n.props.repository.rsData,n.state.settings)}),500);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"classNames",value:function(){var e="";for(var t in this.state.settings)this.state.settings[t]&&(e+="s-"+t+" ");return e}},{key:"render",value:function(){var e=this,t=this.state.settings;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:this.classNames(),children:this.state.scoreTree&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(V,{repository:this.props.repository,mainScoreId:this.state.scoreTree.topScoreId}),Object(x.jsx)(B,{scoreId:this.state.scoreTree.topScoreId,repository:this.props.repository,proMainContext:!0,messenger:this.props.messenger,settings:this.state.settings,scoreTree:this.state.scoreTree})]})}),Object(x.jsxs)("div",{className:"Content",children:[Object(x.jsxs)("div",{style:{maxWidth:"600px",margin:"10px",padding:"1rem 0 .5rem 0",opacity:.3},className:"btn-toolbar justify-content-between",role:"toolbar","aria-label":"Toolbar with button groups",children:[Object(x.jsxs)("div",{className:"btn-group mr-3",role:"group","aria-label":"Save",children:[!t.DbNotAvailable&&t.editable&&t.saveToCloud&&Object(x.jsx)("button",{onClick:this.handleSave,type:"button",value:"Submit",className:"btn btn-secondary",children:"Save to cloud"}),t.portData&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:this.handleUpload,type:"button",value:"download",className:"btn btn-secondary",children:"Upload"}),Object(x.jsx)("button",{onClick:this.handleDownload,type:"button",value:"download",className:"btn btn-secondary",children:"Download"}),Object(x.jsx)("button",{onClick:this.handleExport,type:"button",value:"download",className:"btn btn-secondary",children:"Export"})]})]}),Object(x.jsx)("div",{className:"btn-group mr-3 float-right btn-settings",role:"group","aria-label":"Settings",children:Object(x.jsxs)("svg",{onClick:this.toggleSettings,style:{cursor:"pointer",height:"1em",fill:"#aaa",stroke:"none"},viewBox:"0 0 1280.000000 1280.000000",children:[Object(x.jsx)("metadata",{children:"Created by potrace 1.15, written by Peter Selinger 2001-2017"}),Object(x.jsx)("g",{transform:"translate(0,1280) scale(0.1,-0.1)",children:Object(x.jsx)("path",{d:"M5664 11538 c-38 -40 -55 -68 -68 -113 -19 -65 -44 -149 -70 -235 -9 -30 -74 -248 -145 -484 l-128 -429 -97 -33 c-176 -60 -334 -125 -503 -209 l-168 -83 -100 53 c-55 29 -154 82 -220 117 -66 36 -147 80 -180 98 -232 125 -441 239 -505 275 -41 22 -100 54 -131 70 l-57 29 -108 -101 c-60 -56 -315 -308 -568 -561 l-458 -460 54 -98 c30 -55 77 -139 103 -189 26 -49 62 -115 78 -145 17 -30 57 -103 89 -162 32 -60 86 -159 119 -220 34 -62 84 -156 112 -208 27 -52 56 -104 63 -115 8 -11 14 -26 14 -35 0 -8 -31 -76 -69 -150 -90 -176 -178 -385 -247 -587 -18 -50 -20 -52 -74 -68 -30 -10 -73 -23 -95 -30 -34 -11 -101 -31 -140 -41 -5 -2 -41 -12 -80 -24 -38 -12 -77 -23 -85 -25 -8 -2 -46 -13 -85 -25 -38 -12 -77 -23 -85 -25 -8 -2 -69 -20 -135 -40 -177 -53 -269 -81 -370 -110 -82 -24 -95 -31 -147 -83 l-57 -57 -1 -712 c0 -688 0 -713 19 -722 10 -6 56 -21 102 -35 46 -13 170 -50 274 -81 105 -31 197 -58 205 -60 8 -2 47 -14 85 -25 111 -34 154 -47 245 -73 113 -33 287 -85 326 -98 27 -8 34 -18 49 -67 79 -263 165 -482 275 -702 l68 -136 -52 -100 c-29 -54 -81 -151 -116 -214 -34 -63 -79 -146 -100 -185 -21 -38 -65 -119 -97 -180 -97 -177 -187 -344 -236 -436 l-46 -85 510 -510 509 -509 58 29 c31 17 91 49 132 71 82 46 409 224 535 291 44 24 134 72 200 109 66 36 152 82 191 102 l71 36 179 -90 c98 -50 240 -114 314 -143 74 -29 144 -56 155 -61 18 -7 175 -57 231 -74 14 -3 25 -19 32 -43 18 -63 66 -228 112 -377 11 -38 23 -77 25 -85 3 -13 70 -240 139 -470 13 -41 40 -132 61 -203 l38 -127 723 0 723 0 55 66 c31 36 56 68 57 72 1 13 8 37 29 107 12 39 23 77 25 85 2 8 13 47 25 85 12 39 23 77 25 85 2 8 13 44 24 80 11 36 63 211 116 390 53 179 100 332 105 340 4 8 48 28 97 44 156 50 363 137 548 229 l180 90 55 -29 c30 -16 118 -63 195 -105 125 -68 203 -110 445 -241 36 -20 119 -65 185 -100 66 -36 159 -86 206 -111 47 -26 92 -47 101 -47 18 0 1118 1103 1118 1122 0 7 -12 33 -26 58 -14 25 -45 81 -69 125 -23 44 -71 132 -105 195 -35 63 -138 255 -230 426 -93 170 -177 326 -189 345 -11 19 -21 41 -21 50 0 9 27 69 60 133 53 104 109 230 156 351 9 22 19 47 23 55 4 8 25 69 46 135 21 66 43 125 49 132 6 6 52 23 101 38 148 44 177 52 250 75 39 11 77 23 85 25 8 2 47 13 85 25 39 12 77 23 85 25 8 2 47 13 85 25 39 12 77 23 85 25 8 2 69 20 135 40 66 20 158 47 204 60 74 21 91 30 138 77 l53 52 0 722 0 722 -62 21 c-59 19 -325 98 -358 106 -8 2 -46 14 -85 25 -105 32 -151 46 -250 75 -49 15 -126 37 -170 50 -44 13 -118 35 -165 49 -47 13 -114 33 -150 45 l-65 20 -34 103 c-67 211 -195 507 -293 684 l-45 80 80 145 c43 79 99 182 124 229 57 106 223 413 360 665 24 44 51 95 60 113 l17 33 -499 499 c-275 275 -507 500 -515 500 -9 0 -24 -6 -35 -13 -11 -8 -58 -34 -105 -59 -90 -48 -253 -136 -447 -242 -65 -35 -145 -78 -178 -96 -92 -49 -169 -91 -302 -164 l-121 -66 -159 79 c-192 96 -331 153 -523 216 -80 26 -154 51 -166 55 -15 6 -26 29 -43 86 -33 117 -60 207 -161 544 -51 168 -102 341 -115 385 -13 44 -33 112 -45 150 -12 39 -23 78 -25 88 -2 9 -7 22 -10 27 -4 7 -260 10 -729 10 l-723 0 -49 -52z m981 -3342 c83 -16 89 -17 166 -35 248 -57 582 -231 789 -413 344 -302 557 -671 644 -1118 23 -119 27 -176 27 -362 0 -163 -9 -263 -30 -361 -6 -23 -13 -58 -16 -77 -13 -77 -89 -282 -150 -405 -178 -362 -407 -601 -735 -767 -355 -180 -750 -252 -1120 -203 -63 8 -126 17 -140 20 -14 3 -47 10 -75 16 -91 18 -310 97 -423 154 -560 280 -966 827 -1058 1425 -30 198 -30 501 1 650 3 14 8 41 11 60 31 174 128 426 228 593 120 200 230 324 406 456 216 163 515 302 745 346 73 14 203 35 240 39 83 9 412 -4 490 -18z"})})]})}),Object(x.jsx)("div",{className:"tempVisualLog",children:this.state.tempVisualLog})]}),Object(x.jsx)("div",{className:"settings-container "+(this.state.settingsOpen&&"show-settings"),children:Object(x.jsx)("div",{className:"settings-grid ",children:Object.keys(this.state.settings).map((function(t){return Object(x.jsx)("div",{children:(!0===e.state.settings[t]||!1===e.state.settings[t])&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{type:"checkbox",id:"s-"+t,checked:e.state.settings[t],onChange:e.handleSetting.bind(e,t)}),Object(x.jsx)("label",{htmlFor:"s-"+t,children:t})]})},t)}))})})]}),Object(x.jsx)("svg",{style:{display:"none"},children:Object(x.jsx)("symbol",{id:"callout",viewBox:"0 0 9 9",children:Object(x.jsx)("g",{children:Object(x.jsx)("path",{d:"m9 0h-9l9 9z"})})})}),Object(x.jsx)("svg",{height:"20px",width:"20px",style:{display:"none"},children:Object(x.jsx)("symbol",{id:"expander",viewBox:"0 0 10 10",children:Object(x.jsx)("g",{children:Object(x.jsx)("path",{d:"m1 1 7 4-7 4z"})})})})]})}}]),n}(s.Component),z=function(e){var t=e.scoreTreeId,n=e.repository,r=e.messenger,a=e.settings,i=e.selectId;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(J,{repository:n,scoreTreeId:t,messenger:r,settings:a,selectId:i})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(){return(U=Object(c.a)(a.a.mark((function e(){var t,n,r,c,s,o,l,u,h,p,f,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.RsRepository?window.RsRepository:new g.RepositoryLocalPure,window.RsRepository=t,n=window.RsMessenger?window.RsMessenger:new g.Messenger,window.RsMessenger=n,r=window.RsSettings?window.RsSettings:{},window.RsSettings=r,window.RsCalculateScoreActions=g.calculateScoreActions,null===r.dbCollection&&(r.dbCollection="rsData"),window.RsActions||(window.RsActions=[{newData:{content:'This is a new claim.\n\n.\n* Select the "edit this claim" button below to change this text.\n* Select the "add a pro or con" button to add additional claims.\n* Select the "Import" and "Export" buttons at the bottom to save a copy to your device.',id:"mainClaim",type:"claim"},type:"add_claim",dataId:"mainClaim"},{newData:{sourceClaimId:"mainClaim",topScoreId:"mainScore",id:"ScoreTree",type:"scoreTree"},type:"add_scoreTree",dataId:"ScoreTree"}]),!window.RsDatabase){e.next=13;break}return e.next=12,window.RsDatabase.doc(r.dbCollection).get();case 12:c=e.sent;case 13:if(!c||!c.exists){e.next=17;break}t.rsData=c.data(),e.next=21;break;case 17:if(!window.RsActions){e.next=21;break}return e.next=20,t.notify(window.RsActions);case 20:r.DbNotAvailable=!0;case 21:s=document.getElementsByTagName("rs-score"),o=Object(i.a)(s),e.prev=23,o.s();case 25:if((l=o.n()).done){e.next=40;break}return u=l.value,h=u.getAttribute("score-tree-Id"),p="",h&&(p=h),e.next=32,t.getScoreTree(p);case 32:if(!(f=e.sent)){e.next=36;break}return e.next=36,Object(g.calculateScoreActions)({actions:[new g.Action(f,void 0,"add_scoreTree")],repository:t});case 36:b=new URL(window.location.href).searchParams.get("s"),d.a.render(Object(x.jsx)(z,{scoreTreeId:p,repository:t,messenger:n,settings:window.RsSettings,selectId:b}),u);case 38:e.next=25;break;case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(23),o.e(e.t0);case 45:return e.prev=45,o.f(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[23,42,45,48]])})))).apply(this,arguments)}window.rsStartApp=function(){return U.apply(this,arguments)},"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[92,1,2]]]);
//# sourceMappingURL=main.c1da7012.chunk.js.map