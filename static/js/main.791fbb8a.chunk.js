(this.webpackJsonpeditor=this.webpackJsonpeditor||[]).push([[0],[,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var a=r(58);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=r(19);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var i=r(59);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=r(36);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=r(77);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var l=r(78);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=r(28);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var u=r(79);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var h=r(80);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=r(81);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var f=r(82);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var b=r(39);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var m=r(29);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var v=r(27);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var g=r(40);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var j=r(37);Object.keys(j).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===j[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}}))}))},,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=5e12-e.getTime(),r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n="";for(;t>=1;)n=r[t-62*Math.floor(t/62)]+n,t=Math.floor(t/62);return n+=Array(5).join().split(",").map((function(){return r[Math.floor(Math.random()*r.length)]})).join("")}},,,,,,,,function(e,t,r){"use strict";var n=r(8);Object.defineProperty(t,"__esModule",{value:!0}),t.Score=void 0;var a=r(19);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.Score=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"confidence",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:(0,a.newId)(),f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",b=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",m=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0;n(this,e),this.sourceClaimId=t,this.scoreTreeId=r,this.parentScoreId=i,this.sourceEdgeId=s,this.reversible=o,this.pro=l,this.affects=d,this.confidence=u,this.relevance=h,this.id=p,this.priority=f,this.content=b,this.scaledWeight=m,c(this,"type","score"),c(this,"descendantCount",0),c(this,"generation",0),c(this,"fractionSimple",1),c(this,"fraction",1),c(this,"childrenAveragingWeight",1),c(this,"childrenConfidenceWeight",1),c(this,"childrenRelevanceWeight",1),c(this,"childrenWeight",1),c(this,"weight",1),c(this,"percentOfWeight",1)}},function(e,t,r){"use strict";var n=r(8);Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;t.Action=function e(t,r,a){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n(this,e),this.newData=t,this.oldData=r,this.type=a,this.dataId=c,""===c&&(this.dataId=t.id)}},function(e,t,r){"use strict";var n=r(8);Object.defineProperty(t,"__esModule",{value:!0}),t.RsData=void 0;t.RsData=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];n(this,e),this.actionsLog=t,this.items=r,this.claimEdgeIdsByParentId=a,this.claimEdgeIdsByChildId=c,this.scoreIdsBySourceId=i,this.childIdsByScoreId=s,this.ScoreTreeIds=o}},function(e,t,r){"use strict";var n=r(20),a=r(38);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.IndexReducer=function(e,t,r,c){r&&(e[t][r]||(e[t][r]=[]),-1==e[t][r].indexOf(c)&&(e=i(i({},e),{},n({},t,i(i({},e[t]),{},n({},r,[].concat(a(e[t][r]),[c])))))));return e}},,,function(e,t,r){"use strict";var n=r(13);function a(e){if(void 0!==e.confidence&&void 0!==e.relevance){var t=Math.abs(e.confidence);return!e.reversible&&e.confidence<0&&(t=0),t*e.relevance}return 1}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateScore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.childScores,r=void 0===t?[]:t,c=(e.reversible,{confidence:0,relevance:1,childrenAveragingWeight:0,childrenConfidenceWeight:0,childrenRelevanceWeight:0,childrenWeight:0}),i=0;r.filter((function(e){return"confidence"===e.affects})).length<1&&(c.confidence=1,c.relevance=1,c.childrenAveragingWeight=1,c.childrenConfidenceWeight=1,c.childrenRelevanceWeight=1,c.childrenWeight=1,c.weight=1);var s,o=n(r);try{for(o.s();!(s=o.n()).done;){var l=s.value;l.weight=a(l),c.childrenAveragingWeight+=1,c.childrenConfidenceWeight+=Math.abs(l.confidence),c.childrenRelevanceWeight+=l.relevance,c.childrenWeight+=l.weight,l.weight>i&&(i=l.weight)}}catch(b){o.e(b)}finally{o.f()}var d,u=n(r);try{for(u.s();!(d=u.n()).done;){var h=d.value,p=h.pro?1:-1;if("confidence"===h.affects&&(0===c.childrenWeight?(h.percentOfWeight=0,c.confidence=0):(h.percentOfWeight=h.weight/c.childrenWeight,c.confidence+=h.percentOfWeight*h.confidence*p)),"relevance"===h.affects){var f=h.confidence;!h.reversible&&h.confidence<0&&(f=0),void 0==c.relevance&&(c.relevance=1),h.pro?c.relevance+=f:c.relevance-=f/2}h.scaledWeight=h.weight/i}}catch(b){u.e(b)}finally{u.f()}Object.is(c.confidence,-0)&&(c.confidence=0);Math.abs(c.confidence);!c.reversible&&c.confidence<0&&0;return c.weight=a(c),c.scaledWeight=c.weight,c}},,,function(e,t,r){"use strict";var n=r(2),a=r(13),c=r(26),i=r(8),s=r(25),o=r(61),l=r(63);Object.defineProperty(t,"__esModule",{value:!0}),t.RepositoryLocalPure=void 0;var d=r(29),u=r(69),h=r(70),p=r(74),f=r(75),b=r(76),m=function(e){o(r,e);var t=l(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new d.RsData;return i(this,r),(e=t.call(this,n)).rsData=n,e}return s(r,[{key:"notify",value:function(){var e=c(n.mark((function e(t){var r,c,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.rsData.actionsLog.push({actions:t}),r=a(t);try{for(r.s();!(c=r.n()).done;)i=c.value,this.rsData=(0,u.claims)(this.rsData,i),this.rsData=(0,h.claimEdges)(this.rsData,i),this.rsData=(0,f.scores)(this.rsData,i),this.rsData=(0,b.scoreTrees)(this.rsData,i)}catch(n){r.e(n)}finally{r.f()}case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(p.RepositoryLocalBase);t.RepositoryLocalPure=m},function(e,t,r){"use strict";var n=r(8);Object.defineProperty(t,"__esModule",{value:!0}),t.Claim=void 0;var a=r(19);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.Claim=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.newId)(),i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,e),this.content=t,this.id=r,this.reversible=i,c(this,"type","claim")}},,function(e,t,r){"use strict";var n=r(8);Object.defineProperty(t,"__esModule",{value:!0}),t.ClaimEdge=void 0;var a=r(19);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.ClaimEdge=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"confidence",s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,a.newId)(),l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";n(this,e),this.parentId=t,this.childId=r,this.affects=i,this.pro=s,this.id=o,this.priority=l,c(this,"type","claimEdge")}},function(e,t,r){"use strict";var n=r(8);Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreTree=void 0;var a=r(19);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.ScoreTree=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,a.newId)(),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;n(this,e),this.sourceClaimId=t,this.topScoreId=r,this.confidence=i,this.id=s,this.descendantCount=o,c(this,"type","scoreTree")}},,,,,,,,,,,,,function(e,t,r){},,,,,function(e,t,r){"use strict";var n=r(13),a=r(8),c=r(25);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Messenger=void 0;var s=function(){function e(){var t=this;a(this,e),i(this,"subscribers",[]),i(this,"actionsLog",[]),i(this,"notify",(function(e){t.actionsLog.push(e);var r,a=n(t.subscribers);try{for(a.s();!(r=a.n()).done;){(0,r.value)(e)}}catch(c){a.e(c)}finally{a.f()}}))}return c(e,[{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){var t=this.subscribers.indexOf(e,0);t>-1&&this.subscribers.splice(t,1)}}]),e}();t.Messenger=s},function(e,t,r){"use strict";var n=r(2),a=r(13),c=r(26);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateScoreActions=function(){return f.apply(this,arguments)};var i=r(27),s=r(60),o=r(28),l=r(33),d=r(36);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(){return(f=c(n.mark((function e(){var t,r,c,s,u,p,f,m,g,y,O,w,k,I,S,C,E,P,_,D,M,N,T,B,R,A,F,W,L,V,J,z,U,H,G,X,Y,Z,$,q,K,Q,ee,te=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=te.length>0&&void 0!==te[0]?te[0]:{},r=t.actions,c=void 0===r?[]:r,s=t.repository,u=void 0===s?new d.RepositoryLocalPure:s,p=t.calculator,f=void 0===p?l.calculateScore:p,m=[],g=[],y=[],e.next=6,u.notify(c);case 6:O=a(c),e.prev=7,O.s();case 9:if((w=O.n()).done){e.next=62;break}if("add_claim"!=(k=w.value).type&&"modify_claim"!=k.type||g.push(k.dataId),"add_score"!=k.type){e.next=20;break}if((I=k.newData).parentScoreId){e.next=19;break}return e.next=17,u.getScore(k.dataId);case 17:(S=e.sent)&&(I=S);case 19:g.push(I.sourceClaimId);case 20:if("add_claimEdge"!=k.type&&"modify_claimEdge"!=k.type){e.next=28;break}if((C=k.newData).parentId){e.next=27;break}return e.next=25,u.getClaimEdge(k.dataId);case 25:(E=e.sent)&&(C=E);case 27:g.push(C.parentId);case 28:if("modify_claimEdge"!=k.type){e.next=58;break}return e.next=31,u.getClaimEdge(k.dataId);case 31:if(!(P=h(h({},P=e.sent),k.newData))){e.next=58;break}return k.newData,e.next=37,u.getScoresBySourceId(P.id);case 37:_=e.sent,D=a(_),e.prev=39,D.s();case 41:if((M=D.n()).done){e.next=50;break}if((N=M.value).pro==P.pro&&N.affects==P.affects&&N.priority==P.priority){e.next=48;break}return T=new o.Action({pro:P.pro,affects:P.affects,priority:P.priority},N,"modify_score",N.id),m.push(T),e.next=48,u.notify([T]);case 48:e.next=41;break;case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(39),D.e(e.t0);case 55:return e.prev=55,D.f(),e.finish(55);case 58:"delete_claimEdge"==k.type&&(B=k.oldData,g.push(B.parentId)),"add_scoreTree"==k.type&&(R=k.newData,y.push(R.id));case 60:e.next=9;break;case 62:e.next=67;break;case 64:e.prev=64,e.t1=e.catch(7),O.e(e.t1);case 67:return e.prev=67,O.f(),e.finish(67);case 70:A=0,F=g;case 71:if(!(A<F.length)){e.next=82;break}return W=F[A],e.t2=a,e.next=76,u.getScoresBySourceId(W);case 76:e.t3=e.sent,L=(0,e.t2)(e.t3);try{for(L.s();!(V=L.n()).done;)J=V.value,y.push(J.scoreTreeId)}catch(n){L.e(n)}finally{L.f()}case 79:A++,e.next=71;break;case 82:z=0,U=y;case 83:if(!(z<U.length)){e.next=123;break}return H=U[z],e.next=87,u.getScoreTree(H);case 87:if(!(G=e.sent)){e.next=120;break}return X=[],e.next=92,u.getScore(G.topScoreId);case 92:return(Y=e.sent)||((Y=new i.Score(G.sourceClaimId,G.id)).id=G.topScoreId,X.push(new o.Action(Y,void 0,"add_score"))),e.next=96,b(u,G.topScoreId,G.sourceClaimId||"",X,H);case 96:if(!(X.length>0)){e.next=99;break}return e.next=99,u.notify(X);case 99:return Z=[],e.next=102,v(u,Y,f,Z);case 102:if($=e.sent,!(X.length>0)){e.next=106;break}return e.next=106,u.notify(Z);case 106:return q=[],e.next=109,j(u,Y,q);case 109:if(!(q.length>0)){e.next=112;break}return e.next=112,u.notify(q);case 112:return K=[],e.next=115,x(u,Y.id,K,0);case 115:if(!(K.length>0)){e.next=118;break}return e.next=118,u.notify(K);case 118:m.push.apply(m,X.concat(Z,q,K)),G.descendantCount!=$.descendantCount&&(Q={descendantCount:$.descendantCount},ee={descendantCount:G.descendantCount},m.push(new o.Action(Q,ee,"modify_scoreTree",G.id)));case 120:z++,e.next=83;break;case 123:return e.next=125,u.notify(m);case 125:return e.abrupt("return",m);case 126:case"end":return e.stop()}}),e,null,[[7,64,67,70],[39,52,55,58]])})))).apply(this,arguments)}function b(e,t,r,n,a){return m.apply(this,arguments)}function m(){return(m=c(n.mark((function e(t,r,c,s,l){var d,u,h,p,f;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getClaimEdgesByParentId(c);case 2:return d=e.sent,e.next=5,t.getChildrenByScoreId(r);case 5:u=e.sent,h=a(d),e.prev=7,f=n.mark((function e(){var a,c,d;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.value,(c=u.find((function(e){return e.sourceClaimId===a.childId})))||(d=void 0,c=new i.Score(a.childId,l,r,a.id,void 0,a.pro,a.affects,d,d,d,a.priority),s.push(new o.Action(c,void 0,"add_score",c.id))),e.next=5,b(t,c.id,a.childId,s,l);case 5:case"end":return e.stop()}}),e)})),h.s();case 10:if((p=h.n()).done){e.next=14;break}return e.delegateYield(f(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),h.e(e.t1);case 19:return e.prev=19,h.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[7,16,19,22]])})))).apply(this,arguments)}function v(e,t){return g.apply(this,arguments)}function g(){return(g=c(n.mark((function e(t,r){var c,i,d,u,p,f,b,m,g,j,y,x,O,w,k,I=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=I.length>2&&void 0!==I[2]?I[2]:l.calculateScore,i=I.length>3?I[3]:void 0,e.next=4,t.getChildrenByScoreId(r.id);case 4:d=e.sent,u=[],p=0,f=a(d),e.prev=8,f.s();case 10:if((b=f.n()).done){e.next=19;break}return m=b.value,e.next=14,v(t,m,c,i);case 14:g=e.sent,u.push(g),p+=g.descendantCount+1;case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),f.e(e.t0);case 24:return e.prev=24,f.f(),e.finish(24);case 27:j=c({childScores:u}),y=0,x=u;case 29:if(!(y<x.length)){e.next=38;break}return O=x[y],e.next=33,t.getScore(O.id);case 33:(w=e.sent)&&(0,s.hasItemChanged)(w,O)&&i.push(new o.Action(O,void 0,"modify_score"));case 35:y++,e.next=29;break;case 38:return k=h(h(h({},r),j),{},{descendantCount:p}),(0,s.hasItemChanged)(r,k)&&i.push(new o.Action(k,void 0,"modify_score")),e.abrupt("return",k);case 41:case"end":return e.stop()}}),e,null,[[8,21,24,27]])})))).apply(this,arguments)}function j(e,t,r){return y.apply(this,arguments)}function y(){return(y=c(n.mark((function e(t,r,c){var i,s,l,d,u,p,f,b,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==r.id||void 0==r.fraction||void 0==r.fractionSimple){e.next=27;break}return e.next=3,t.getChildrenByScoreId(r.id);case 3:i=e.sent,s=0,l=a(i);try{for(l.s();!(d=l.n()).done;)"confidence"===(u=d.value).affects&&(s+=u.relevance)}catch(n){l.e(n)}finally{l.f()}0===s&&(s=1),p=a(i),e.prev=9,p.s();case 11:if((f=p.n()).done){e.next=19;break}return b=f.value,(m=h(h({},b),{},{fractionSimple:b.relevance/s*r.fractionSimple,fraction:r.fraction*b.percentOfWeight})).fractionSimple==b.fractionSimple&&m.fraction==b.fraction||c.push(new o.Action(m,void 0,"modify_score")),e.next=17,j(t,m,c);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),p.e(e.t0);case 24:return e.prev=24,p.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[9,21,24,27]])})))).apply(this,arguments)}function x(e,t,r,n){return O.apply(this,arguments)}function O(){return(O=c(n.mark((function e(t,r,c,i){var s,l,d,u,p;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getChildrenByScoreId(r);case 2:s=e.sent,i++,l=a(s),e.prev=5,l.s();case 7:if((d=l.n()).done){e.next=14;break}return(u=d.value).generation!=i&&(p=h(h({},u),{},{generation:i}),c.push(new o.Action(p,void 0,"modify_score"))),e.next=12,x(t,u.id,c,i);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),l.e(e.t0);case 19:return e.prev=19,l.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})))).apply(this,arguments)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasItemChanged=function(e,t){return!(JSON.stringify(e,Object.keys(e).sort())===JSON.stringify(t,Object.keys(t).sort()))},t.itemChanges=a,t.pushActionIfChanged=function(e,t,r,c,i){var s=a(t,r);s&&e.push(new n.Action(s.partialNewItem,s.partialNewItem,c,i))};var n=r(28);function a(e,t){var r={},n={};for(var a in t)t[a]!==e[a]&&(r[a]=t[a],n[a]=e[a]);for(var c in e)void 0===t[c]&&(n[c]=e[c]);return Object.keys(n).length>0?{partialNewItem:n,partialOldItem:r}:void 0}},,,,,,,,,function(e,t,r){"use strict";var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.claims=function(e,t){switch(t.type){case"add_claim":case"sync_claim":case"modify_claim":var r=e.items[t.dataId];return r||((r=new a.Claim("","")).id=t.dataId),r=i(i({},r),t.newData),i(i({},e),{},{items:i(i({},e.items),{},n({},t.dataId,r))});default:return e}};var a=r(37);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";var n=r(13),a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.claimEdges=function(e,t){switch(t.type){case"add_claimEdge":case"modify_claimEdge":case"sync_claimEdge":var r=e.items[t.dataId];return r||((r=new i.ClaimEdge("","")).id=t.dataId),r=o(o({},r),t.newData),e=o(o({},e),{},{items:o(o({},e.items),{},a({},t.dataId,r))}),e=(0,c.IndexReducer)(e,"claimEdgeIdsByChildId",r.childId,t.dataId),e=(0,c.IndexReducer)(e,"claimEdgeIdsByParentId",r.parentId,t.dataId);case"delete_claimEdge":var s=e.items[t.dataId];delete e.items[t.dataId],e=d(e,e.claimEdgeIdsByChildId,s.childId,t.dataId);var l,u=(e=d(e,e.claimEdgeIdsByParentId,s.parentId,t.dataId)).scoreIdsBySourceId[t.dataId],h=n(u);try{for(h.s();!(l=h.n()).done;){var p=l.value,f=e.items[p];delete e.items[p],delete e.scoreIdsBySourceId[t.dataId],delete e.childIdsByScoreId[p],f.parentScoreId&&(e=d(e,e.childIdsByScoreId,f.parentScoreId,p)),e=d(e,e.scoreIdsBySourceId,f.sourceClaimId,p)}}catch(b){h.e(b)}finally{h.f()}return e;default:return e}},t.IndexDelete=d;var c=r(30),i=r(39);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r,n){var a=t[r],c=a.indexOf(n,0);return c>-1&&a.splice(c,1),e}},,,,function(e,t,r){"use strict";var n=r(38),a=r(13),c=r(2),i=r(26),s=r(8),o=r(25);Object.defineProperty(t,"__esModule",{value:!0}),t.RepositoryLocalBase=void 0;var l=r(29);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l.RsData;s(this,e),this.rsData=t,d(this,"log",[])}return o(e,[{key:"getClaim",value:function(){var e=i(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rsData.items[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClaimEdge",value:function(){var e=i(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rsData.items[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScore",value:function(){var e=i(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rsData.items[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScoreTree",value:function(){var e=i(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rsData.items[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getClaimEdgesByParentId",value:function(){var e=i(c.mark((function e(t){var r,n,i,s,o,l;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.rsData.claimEdgeIdsByParentId[t],n=[],!r){e.next=22;break}i=a(r),e.prev=4,i.s();case 6:if((s=i.n()).done){e.next=14;break}return o=s.value,e.next=10,this.getClaimEdge(o);case 10:(l=e.sent)&&n.push(l);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClaimEdgesByChildId",value:function(){var e=i(c.mark((function e(t){var r,n,i,s,o,l;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.rsData.claimEdgeIdsByChildId[t],n=[],i=a(r),e.prev=3,i.s();case 5:if((s=i.n()).done){e.next=13;break}return o=s.value,e.next=9,this.getClaimEdge(o);case 9:(l=e.sent)&&n.push(l);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),i.e(e.t0);case 18:return e.prev=18,i.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getScoresBySourceId",value:function(){var e=i(c.mark((function e(t){var r,n,i,s,o,l;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.rsData.scoreIdsBySourceId[t],n=[],!r){e.next=22;break}i=a(r),e.prev=4,i.s();case 6:if((s=i.n()).done){e.next=14;break}return o=s.value,e.next=10,this.getScore(o);case 10:(l=e.sent)&&n.push(l);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChildrenByScoreId",value:function(){var e=i(c.mark((function e(t){var r,n,i,s,o,l;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.rsData.childIdsByScoreId[t],n=[],!r){e.next=22;break}i=a(r),e.prev=4,i.s();case 6:if((s=i.n()).done){e.next=14;break}return o=s.value,e.next=10,this.getScore(o);case 10:(l=e.sent)&&n.push(l);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDescendantScoresById",value:function(){var e=i(c.mark((function e(t){var r,a,i;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,this.getChildrenByScoreId(t);case 3:a=e.sent;case 4:if(!(a.length>0)){e.next=18;break}if(!(i=a.pop())){e.next=16;break}return r.push(i),e.t0=a.push,e.t1=a,e.t2=n,e.next=13,this.getChildrenByScoreId(i.id);case 13:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 16:e.next=4;break;case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.RepositoryLocalBase=u},function(e,t,r){"use strict";var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.scores=function(e,t){switch(t.type){case"add_score":case"modify_score":case"sync_score":var r=e.items[t.dataId];return r||((r=new a.Score("","")).id=t.dataId),r=s(s({},r),t.newData),e=s(s({},e),{},{items:s(s({},e.items),{},n({},t.dataId,r))}),e=(0,c.IndexReducer)(e,"childIdsByScoreId",r.parentScoreId,t.dataId),e=(0,c.IndexReducer)(e,"scoreIdsBySourceId",r.sourceClaimId,t.dataId),e=(0,c.IndexReducer)(e,"scoreIdsBySourceId",r.sourceEdgeId,t.dataId);default:return e}};var a=r(27),c=r(30);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.scoreTrees=function(e,t){switch(t.type){case"add_scoreTree":case"modify_scoreTree":var r=e.items[t.dataId];return r||((r=new a.ScoreTree("","")).id=t.dataId),r=s(s({},r),t.newData),e=s(s({},e),{},{items:s(s({},e.items),{},n({},t.dataId,r))}),e=(0,c.IndexReducer)(e,"ScoreTreeIds",r.id,t.dataId);default:return e}};var a=r(40),c=r(30);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t,r){"use strict";var n=r(13);Object.defineProperty(t,"__esModule",{value:!0}),t.selectNode=function(e,t){var r,a=[];a.push({itemId:e,status:"selected"});var c=null===(r=t.items[e])||void 0===r?void 0:r.parentScoreId;for(;void 0!=c;){var i;a.push({itemId:c,status:"ancestor"}),c=null===(i=t.items[c])||void 0===i?void 0:i.parentScoreId}if(t.childIdsByScoreId[e]){var s,o=n(t.childIdsByScoreId[e]);try{for(o.s();!(s=o.n()).done;){var l=s.value;a.push({itemId:l,status:"child"})}}catch(d){o.e(d)}finally{o.f()}}return a}},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){},,,,,,,function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),c=r(7),i=r(5),s=(r(53),r(1)),o=r.n(s),l=r(17),d=r.n(l),u=r(12),h=r(3),p=r(6),f=r(9),b=r(14),m=r(11),v=r(10),g=r(4),j=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"confidence",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(g.newId)(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";Object(p.a)(this,e),this.parentId=t,this.childId=r,this.affects=n,this.pro=a,this.id=c,this.priority=i,this.type="claimEdge",this.checked=void 0},y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(g.newId)(),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(p.a)(this,e),this.content=t,this.id=r,this.reversible=n,this.type="claim",this.labelMin="",this.labelMid="",this.labelMax="",this.priority=""},x=r(0),O=function(e){Object(m.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).handleSubmit=function(){var e=[];n.state.pasteClaim&&n.state.claimEdge?n.state.claimEdge&&(n.state.claimEdge.childId=n.state.pasteClaim,e.push(new g.Action(n.state.claimEdge,void 0,"add_claimEdge"))):(e.push(new g.Action(n.state.claim,void 0,n.props.new?"add_claim":"modify_claim")),n.state.claimEdge&&e.push(new g.Action(n.state.claimEdge,void 0,n.props.new?"add_claimEdge":"modify_claimEdge")));Object(g.calculateScoreActions)({actions:e,repository:n.props.repository}).then(function(){var t=Object(i.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.props.messenger.notify(e.concat(r));case 2:n.props.handleEditClose();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},n.handleText=function(e){var t=e.currentTarget.id.split("."),r=n.state;if(2===t.length)n.setState(Object(u.a)({},t[0],Object(h.a)(Object(h.a)({},r[t[0]]),{},Object(u.a)({},t[1],e.currentTarget.value))));else{if(1!==t.length)throw new Error("id expectes 1 or 2 items in path. "+t.length+" were received.");n.setState(Object(u.a)({},t[0],e.currentTarget.value))}},n.handlePriority=function(e){n.setState({claimEdge:Object(h.a)(Object(h.a)({},n.state.claimEdge),{},{priority:e.currentTarget.value})})},n.handlePasteClaim=function(e){n.setState({pasteClaim:e.currentTarget.value})},n.handlePro=function(e){var t=n.props.proMainContext?e.currentTarget.checked:!e.currentTarget.checked;n.setState({claimEdge:Object(h.a)(Object(h.a)({},n.state.claimEdge),{},{pro:e.currentTarget.checked}),proMain:t})},n.handleProMain=function(e){var t=n.props.proMainContext?e.currentTarget.checked:!e.currentTarget.checked;n.setState({claimEdge:Object(h.a)(Object(h.a)({},n.state.claimEdge),{},{pro:t}),proMain:e.currentTarget.checked})},n.handleDelete=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.state.claimEdge&&((t=[]).push(new g.Action(void 0,n.state.claimEdge,"delete_claimEdge",n.state.claimEdge.id)),Object(g.calculateScoreActions)({actions:t,repository:n.props.repository}).then(function(){var e=Object(i.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.messenger.notify(t.concat(r));case 2:n.props.handleEditClose();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),n.handleCancel=function(){n.props.handleEditClose()},n.state={proMain:!0,pasteClaim:""},n}return Object(f.a)(r,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!this.props.new){e.next=6;break}t.claim=new y,t.claimEdge=new j(this.props.claimId,t.claim.id),e.next=11;break;case 6:return e.next=8,this.props.repository.getClaim(this.props.claimId);case 8:(r=e.sent)&&(t.claim=r),this.props.claimEdge&&(t.claimEdge=JSON.parse(JSON.stringify(this.props.claimEdge)));case 11:t.claimEdge&&(t.proMain=this.props.proMainContext?t.claimEdge.pro:!t.claimEdge.pro),t.claim&&(void 0===t.claim.labelMin&&(t.claim.labelMin=""),void 0===t.claim.labelMid&&(t.claim.labelMid=""),void 0===t.claim.labelMax&&(t.claim.labelMax=""),t.claimEdge&&void 0===t.claimEdge.priority&&(t.claim.priority="")),this.setState(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsx)(x.Fragment,{children:this.state.claim&&Object(x.jsxs)("form",{className:"container",children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"claim.content",children:"Content"}),Object(x.jsx)("textarea",{className:"form-control",id:"claim.content",value:this.state.claim.content,onChange:this.handleText,rows:2}),Object(x.jsxs)("small",{className:"form-text text-muted",children:["For hyperlinks us ",Object(x.jsx)("a",{href:"https://commonmark.org/help/",children:"commonMark"})," syntax: This is [an example](http://example.com/) inline link."]})]}),Object(x.jsxs)("div",{className:"form-row  edit-lines",children:[Object(x.jsxs)("div",{className:"form-group col-4",children:[Object(x.jsx)("label",{htmlFor:"claim.labelMin",children:"Minimum Value Label"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"claim.labelMin",value:this.state.claim.labelMin,onChange:this.handleText})]}),Object(x.jsxs)("div",{className:"form-group col-4",children:[Object(x.jsx)("label",{htmlFor:"claim.labelMid",children:"Middle Value Label"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"claim.labelMid",value:this.state.claim.labelMid,onChange:this.handleText})]}),Object(x.jsxs)("div",{className:"form-group col-4",children:[Object(x.jsx)("label",{htmlFor:"claim.labelMax",children:"Maximum Value Label"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"claim.labelMax",value:this.state.claim.labelMax,onChange:this.handleText})]})]}),this.state.claimEdge&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"form-row",children:[Object(x.jsx)("div",{className:"form-group col-xs-4 mr-4",children:Object(x.jsxs)("div",{className:"form-check",children:[Object(x.jsx)("input",{className:"form-check-input",type:"checkbox",id:"claimEdge.pro",checked:this.state.claimEdge.pro,onChange:this.handlePro}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"claimEdge.pro",children:"Pro Parent"})]})}),Object(x.jsx)("div",{className:"form-group col-xs-4",children:Object(x.jsxs)("div",{className:"form-check",children:[Object(x.jsx)("input",{className:"form-check-input",type:"checkbox",id:"proMain",checked:this.state.proMain,onChange:this.handleProMain}),Object(x.jsx)("label",{className:"form-check-label",htmlFor:"proMain",children:"Pro Main"})]})})]}),Object(x.jsxs)("div",{className:"form-row",children:[Object(x.jsxs)("div",{className:"form-group col-xs-4",children:[Object(x.jsx)("label",{htmlFor:"claimEdge.affects",children:"Affects"}),Object(x.jsxs)("select",{className:"form-control",id:"claimEdge.affects",value:this.state.claimEdge.affects,onChange:this.handleText,children:[Object(x.jsx)("option",{value:"confidence",children:"Confidence"}),Object(x.jsx)("option",{value:"relevance",children:"Relevance"})]})]}),Object(x.jsxs)("div",{className:"form-group col-xs-4",children:[Object(x.jsx)("label",{htmlFor:"claimEdge.priority",children:"Priority"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"claimEdge.priority",value:this.state.claimEdge.priority,onChange:this.handlePriority})]}),Object(x.jsxs)("div",{className:"form-group col-xs-4",children:[Object(x.jsx)("label",{htmlFor:"pasteClaim",children:"Paste Claim"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"pasteClaim",value:this.state.pasteClaim,onChange:this.handlePasteClaim})]})]})]}),Object(x.jsxs)("div",{className:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups",children:[Object(x.jsx)("div",{className:"btn-group mr-3",role:"group","aria-label":"Save Locally",children:Object(x.jsx)("button",{type:"button",value:"Save Locally",className:"btn btn-primary",onClick:this.handleSubmit,children:"Save Locally"})}),Object(x.jsx)("div",{className:"btn-group mr-3",role:"group","aria-label":"Cancel",children:Object(x.jsx)("button",{type:"button",value:"Cancel",className:"btn btn-secondary",onClick:this.handleCancel,children:"Cancel"})}),this.props.claimEdge&&Object(x.jsx)("div",{className:"btn-group ml-5",role:"group","aria-label":"Delete",children:Object(x.jsx)("button",{type:"button",value:"Delete",className:"btn btn btn-outline-danger",onClick:this.handleDelete,children:"Delete"})})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"form-row",children:[Object(x.jsxs)("div",{className:"form-group col-6",children:[Object(x.jsx)("label",{htmlFor:"claim.claimId",children:"Claim ID"}),Object(x.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"claim.claimId",value:this.state.claim.id,onChange:this.handleText})]}),Object(x.jsxs)("div",{className:"form-group col-6",children:[Object(x.jsx)("label",{htmlFor:"claim.scoreId",children:"Score ID"}),Object(x.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"claim.scoreId",value:this.props.scoreId,onChange:this.handleText})]})]})]})})}}]),r}(o.a.Component),w=r(94),k=r(95);function I(e,t,r){var n,a=Object(g.selectNode)(e,t),i=window.document.getElementsByClassName("expander2"),s=Object(c.a)(i);try{var o=function(){var e=n.value,t=window.document.getElementById(e.id.replace("expander2","expander3")),c=a.find((function(t){return t.itemId===e.id.substring(10,100)}));c?"selected"===c.status?(e.checked=!0,t.checked=!0):"ancestor"!==c.status||(null===r||void 0===r?void 0:r.selectedOnly)?(e.checked=!1,t.checked=!1):(e.checked=!1,t.checked=!0):(e.checked=!1,t.checked=!1)};for(s.s();!(n=s.n()).done;)o()}catch(l){s.e(l)}finally{s.f()}}r(84);var S=function(e){Object(m.a)(r,e);var t=Object(v.a)(r);function r(e){return Object(p.a)(this,r),t.call(this,e)}return Object(f.a)(r,[{key:"render",value:function(){var e=this.props.percentage;return e>0&&e<4&&(e=4),e>95&&(e=95),Object(x.jsx)("div",{className:"rs-bucket",children:Object(x.jsx)("div",{className:"rs-bucket-fill",style:{height:"".concat(e,"%")}})})}}]),r}(o.a.Component),C=r(46),E=r.n(C),P=r(45);function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=E.a.render(e.content,{score:t,claim:e,fractionalizedScore:r,sign:n}),c=new P.Parser({}),i=new P.HtmlRenderer({safe:!0}),s=c.parse(a),o=i.render(s);return{__html:o=o.replace(/href="/g,' target="_blank" rel="noopener noreferrer"  href="')}}r(45);var D=function(e){Object(m.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).handleChildrenVisible=function(){I(n.state.score.id,n.props.repository.rsData,n.props.settings)},n.handleDataDispatch=function(){var e=Object(i.a)(a.a.mark((function e(t){var r,i,s,o,l,d,u,p,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(c.a)(t),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=23;break}if(s=i.value,o=s.newData,l=s.type,d=s.dataId,u=s.oldData,p={},"modify_claim"===l&&d===n.state.claim.id&&(p.claim=Object(h.a)(Object(h.a)({},n.state.claim),o)),"modify_claimEdge"===l&&n.state.claimEdge&&d===n.state.claimEdge.id&&(p.claimEdge=Object(h.a)(Object(h.a)({},n.state.claimEdge),o)),"delete_claimEdge"!==l||u.parentId!==n.state.claim.id){e.next=13;break}return e.next=12,n.props.repository.getChildrenByScoreId(n.state.score.id);case 12:p.childScores=e.sent;case 13:if("modify_score"===l&&d===n.state.score.id&&(p.score=Object(h.a)(Object(h.a)({},n.state.score),o)),"add_score"!==l||o.parentScoreId!==n.state.score.id){e.next=20;break}return!1===n.state.childrenVisible&&(p.childrenVisible=!0),e.next=18,n.props.repository.getChildrenByScoreId(n.state.score.id);case 18:f=e.sent,p.childScores=f;case 20:n.setState(p);case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),r.e(e.t0);case 28:return e.prev=28,r.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[1,25,28,31]])})));return function(t){return e.apply(this,arguments)}}(),n.handleEditButtonClick=function(){n.setState({editorVisible:!n.state.editorVisible,addMode:!1})},n.handleAddButtonClick=function(){n.setState({addMode:!0,editorVisible:!n.state.editorVisible})},n.handleEditClose=function(){n.setState({editorVisible:!1})},n.state={childrenVisible:!1,editorVisible:!1,addMode:!1,score:new g.Score("",""),claim:new y,childScores:[],claimEdge:void 0},n.state.score.confidence=.5,n}return Object(f.a)(r,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,n,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.repository.getScore(this.props.scoreId);case 2:if(t=e.sent,r=new y,!t){e.next=17;break}if(!t.sourceEdgeId){e.next=9;break}return e.next=8,this.props.repository.getClaimEdge(t.sourceEdgeId);case 8:n=e.sent;case 9:return e.next=11,this.props.repository.getClaim(t.sourceClaimId);case 11:return c=e.sent,e.next=14,this.props.repository.getChildrenByScoreId(t.id);case 14:i=e.sent,c&&(r=c),this.setState({score:t,claim:r,childScores:i,claimEdge:n});case 17:this.props.messenger.subscribe(this.handleDataDispatch);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.messenger.unsubscribe(this.handleDataDispatch)}},{key:"render",value:function(){var e=this.props,t=this.state.score,n=this.state.claim,a=this.state.childScores,i=e.proMainContext,s=Math.round(100*t.confidence),o="".concat(s,"%"),l=this.props.settings,d=t.confidence,u="",h="";t&&(t.pro||(i=!i),!n.reversible&&t.confidence<0&&(d=0),s=Math.round(d*t.relevance*100),"relevance"===t.affects?(h=t.pro?"X":"\xf7",o="".concat((t.relevance+1).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1}))):(100===s&&(s=99),o="".concat(s.toString().padStart(2," "),"%")));var p="";if(l.scoreDescriptions)if("relevance"===t.affects)p="Importance",p=t.pro?"Increases "+p:"Decreases "+p;else{var f,b="";t.parentScoreId?(f=l.scoreDescriptions.impact,b=i?" Pro":" Con"):f=l.scoreDescriptions.result;var m,v=Object(c.a)(f);try{for(v.s();!(m=v.n()).done;){var g=m.value;t.confidence*t.relevance>=g.min&&(p=g.desc)}}catch(P){v.e(P)}finally{v.f()}p+=b+": "}a.length||(p="Assumed "+p);var j="";this.state.score.descendantCount>0&&(j=" based on "+this.state.score.descendantCount+" claim",this.state.score.descendantCount>1&&(j+="s"),j+=".");var y=a;a.length>1&&(y=a.sort((function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:e.descendantCount>t.descendantCount?1:t.descendantCount>e.descendantCount?-1:e.confidence>t.confidence?1:t.confidence>e.confidence?-1:0})));var I=i?"pro":"con";"relevance"===t.affects?(h=t.pro?"X":"\xf7",u+="".concat((t.relevance+1).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1}))):("100"===(u=Math.abs(100*t.fraction-(1-t.confidence)*t.fraction*100).toFixed(0))&&(u="99"),t.parentScoreId?h=i?"+":"-":(h=t.confidence<0?"-":" ",u+="%"));var C=new URL(window.location.toString());C.searchParams.set("s",t.id);var E="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(C.toString()),"%20%40GulliBot");return Object(x.jsxs)("div",{className:"claim-outer",children:[Object(x.jsx)("input",{id:"expander2-"+t.id,type:"checkbox",className:"expander2",onChange:this.handleChildrenVisible}),Object(x.jsx)("input",{id:"expander3-"+t.id,type:"checkbox",className:"expander3"}),Object(x.jsx)("div",{className:"claim-hider"+(t.parentScoreId?"":" mainclaim"),children:Object(x.jsxs)("div",{className:"claim "+I,children:[a.length>0&&Object(x.jsx)("div",{id:"expander-"+this.state.score.id,className:"expander"+(this.state.childrenVisible?" expanded":" collapsed"),children:Object(x.jsx)("svg",{width:"20px",height:"20px",children:Object(x.jsx)("use",{href:"#expander"})})}),Object(x.jsxs)("div",{className:"claim-inner",children:[Object(x.jsxs)("div",{className:"lines",children:[Object(x.jsx)("span",{className:"min",title:n.labelMin,children:n.labelMin}),Object(x.jsx)("span",{className:"mid",title:n.labelMid,children:n.labelMid}),Object(x.jsx)("span",{className:"max",title:n.labelMax,children:n.labelMax}),Object(x.jsxs)("div",{className:"lines-inner",children:[Object(x.jsx)("svg",{className:"lines-pointer",style:{left:100*(i?(d+1)/2:1-(d+1)/2)+"%"},height:"20",width:"20",viewBox:"0 0 10 10",children:Object(x.jsx)("path",{d:"M 9,3 C 9,6 6,5 5,10 4,5 1,6 1,3 1,1 3,0 5,0 7,0 9,1 9,3 Z"})}),Object(x.jsx)("div",{className:"tic",style:{left:"0%"}}),Object(x.jsx)("div",{className:"tic",style:{left:"33.3%"}}),Object(x.jsx)("div",{className:"tic",style:{left:"66.6%"}}),Object(x.jsx)("div",{className:"tic",style:{left:"100%"}})]})]}),Object(x.jsx)("label",{htmlFor:"expander2-"+t.id,className:"numbers",title:p+j,children:Object(x.jsxs)("span",{className:"number",children:[(l.showFractionalized||l.showScore||l.showBucket)&&" "!=h?Object(x.jsx)("span",{className:"sign",children:h}):"",l.showFractionalized?u:"",l.showFractionalized&&l.showScore?" : ":"",l.showScore?o:"",l.showBucket?Object(x.jsx)(S,{percentage:100*t.scaledWeight}):""]})}),Object(x.jsx)("span",{className:"score-description",title:o+"% confidence based on "+j,children:p+j}),Object(x.jsx)("span",{className:"rs-content",dangerouslySetInnerHTML:_(n,t,u,h)}),Object(x.jsx)("label",{className:"more-info",htmlFor:"expander2-"+t.id,children:"More info\u2026"})]}),Object(x.jsx)("svg",{className:"callout",width:"30px",height:"30px",children:Object(x.jsx)("use",{href:"#callout"})})]})}),Object(x.jsxs)("div",{className:"scoreInfo",children:[Object(x.jsxs)("span",{className:"editable",children:[p+j,Object(x.jsx)("button",{onClick:this.handleEditButtonClick,className:"btn-inline",children:"edit this claim"}),Object(x.jsx)("button",{onClick:this.handleAddButtonClick,className:"btn-inline",children:"add a pro or con"})]}),0===a.length?Object(x.jsxs)("p",{children:["I assume this claim is 100% accurate because I have not been given a reason to doubt it yet. I am gullible. If you feel this claim is incorrect please give me your specific reasons and evidence on ",Object(x.jsx)("a",{target:"_blank",href:E,children:"Twitter"}),"\xa0 or ",Object(x.jsx)("a",{target:"_blank",href:"https://www.freesuggestionbox.com/pub/djfbumi",children:"anonymously"}),". ",Object(x.jsx)("a",{target:"_blank",href:"https://GulliBot.com/score",children:"How I score claims"}),"."]}):Object(x.jsx)("p",{style:{marginBottom:"0"},children:Object(x.jsx)("a",{target:"_blank",href:E,children:"Tweet about this claim ^^"})}),t.scaledWeight<t.weight?Object(x.jsx)("p",{children:"This claim has a lower impact because other claims in this section have a higher importance. Look at the claims with higher impact to see why they are more important."}):""]}),Object(x.jsx)(w.a,{in:this.state.editorVisible,timeout:490,classNames:"editor",children:Object(x.jsx)("div",{children:this.state.editorVisible&&Object(x.jsx)(O,{claimId:n.id,repository:e.repository,claimEdge:this.state.claimEdge,proMainContext:this.state.addMode?i:e.proMainContext,handleEditClose:this.handleEditClose,messenger:e.messenger,new:this.state.addMode,scoreId:this.state.score.id})})}),Object(x.jsx)("ul",{id:"children-"+this.state.score.id,className:"children "+(this.state.childrenVisible?"":"hide"),children:Object(x.jsx)(k.a,{component:null,children:0===a.length?"":y.map((function(t){return Object(x.jsx)(w.a,{timeout:5e3,classNames:"score",children:Object(x.jsx)("li",{children:Object(x.jsx)(r,{scoreId:t.id,repository:e.repository,proMainContext:i,messenger:e.messenger,settings:e.settings,scoreTree:e.scoreTree})},t.id)},t.id)}))})})]})}}]),r}(o.a.Component),M=r(32),N=(r(91),r(48)),T=r(49),B=new N.Index({encode:T.a,tokenize:"full",minlength:2,filter:[]}),R=!1,A=function(e){var t=e.repository,r=e.mainScoreId,n=Object(s.useState)(""),o=Object(M.a)(n,2),l=o[0],d=o[1],u=Object(s.useState)([]),h=Object(M.a)(u,2),p=h[0],f=h[1],b=function(){var e=Object(i.a)(a.a.mark((function e(n){var i,s,o,l,u,h,p,b,m,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.currentTarget.value,d(i),R){e.next=27;break}return R=!0,e.t0=c.a,e.next=7,t.getDescendantScoresById(r);case 7:e.t1=e.sent,s=(0,e.t0)(e.t1),e.prev=9,s.s();case 11:if((o=s.n()).done){e.next=19;break}return l=o.value,e.next=15,t.getClaim(l.sourceClaimId);case 15:(u=e.sent)&&B.add(u.id,u.content);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(9),s.e(e.t2);case 24:return e.prev=24,s.f(),e.finish(24);case 27:if(!(i.length>2)){e.next=52;break}h=[],p=Object(c.a)(B.search(i)),e.prev=30,p.s();case 32:if((b=p.n()).done){e.next=43;break}return m=b.value,e.next=36,t.getClaim(m);case 36:return v=e.sent,e.next=39,t.getScoresBySourceId(m);case 39:g=e.sent[0],v&&g&&h.push({claim:v,score:g});case 41:e.next=32;break;case 43:e.next=48;break;case 45:e.prev=45,e.t3=e.catch(30),p.e(e.t3);case 48:return e.prev=48,p.f(),e.finish(48);case 51:f(h);case 52:case"end":return e.stop()}}),e,null,[[9,21,24,27],[30,45,48,51]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var r;I(e,t.rsData,{}),null===(r=document.getElementById("children-"+e))||void 0===r||r.scrollIntoView()};return Object(x.jsxs)("div",{className:"search",children:[Object(x.jsx)("form",{children:Object(x.jsx)("div",{className:"form-row ",children:Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"searchBox",children:"Search this analysis"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"searchBox",value:l,onChange:b})]})})}),Object(x.jsx)("div",{className:"search-results-hider"+(p.length?" hidden":""),children:Object(x.jsx)("div",{className:"searchResults",children:Object(x.jsx)(k.a,{component:null,children:p.map((function(e,t){var r=e.claim,n=e.score;return Object(x.jsx)(w.a,{timeout:500,classNames:"searchitem",children:Object(x.jsxs)("div",{className:"search-result",onClick:function(){return m(n.id)},children:[t?Object(x.jsx)("hr",{}):"",Object(x.jsx)("span",{className:"rs-content",dangerouslySetInnerHTML:_(r,n)}),"\xa0",Object(x.jsx)("a",{className:"searchMoreInfo",onClick:function(){return m(n.id)},target:"_blank",children:"More Info\u2026"})]})},r.id)}))})})})]})},F=function(e){Object(m.a)(r,e);var t=Object(v.a)(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).handleDataDispatch=function(){var e=Object(i.a)(a.a.mark((function e(t){var r,i,s,o,l,d,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(c.a)(t);try{for(r.s();!(i=r.n()).done;)o=i.value,l=o.newData,d=o.type,u=o.dataId,p={},"modify_scoreTree"===d&&u===(null===(s=n.state.scoreTree)||void 0===s?void 0:s.id)&&(p.scoreTree=Object(h.a)(Object(h.a)({},n.state.scoreTree),l)),n.setState(p)}catch(a){r.e(a)}finally{r.f()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSave=Object(i.a)(a.a.mark((function e(){var t,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getRsDataCleanedForTransfer(),e.prev=1,e.next=4,window.RsDatabase.doc(n.state.settings.dbCollection).set(t);case 4:r={tempVisualLog:"".concat(Date(),": Document successfully written!")},n.setState(r),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),c={tempVisualLog:"".concat(Date(),": Error writing document:").concat(e.t0)},n.setState(c);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),n.getRsDataCleanedForTransfer=function(){var e=JSON.parse(JSON.stringify(n.props.repository.rsData));return e.actionsLog=[],e},n.handleImport=function(){var e=document.createElement("div");e.innerHTML='<input type="file">';var t=e.firstChild,r=Object(b.a)(n);t&&(t.addEventListener("change",(function(){if(t.files){var e=t.files[0];if(e.name.match(/\.(txt|json)$/)){var n=new FileReader;n.onload=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.repository.rsData=JSON.parse(n.result),t=r.state.scoreTree,r.setState({scoreTree:void 0}),e.next=5,Object(g.calculateScoreActions)({actions:[new g.Action(t,void 0,"add_scoreTree")],repository:r.props.repository}).then((function(e){setTimeout((function(){r.setState({scoreTree:t})}),100)}));case 5:case"end":return e.stop()}}),e)}))),n.readAsText(e)}else alert("File not supported, .txt or .json files only")}})),t.click())},n.handleExport=Object(i.a)(a.a.mark((function e(){var t,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.showSaveFilePicker){e.next=13;break}return e.next=3,window.showSaveFilePicker();case 3:return t=e.sent,e.next=6,t.createWritable();case 6:return r=e.sent,e.next=9,r.write(JSON.stringify(n.getRsDataCleanedForTransfer()));case 9:return e.next=11,r.close();case 11:e.next=14;break;case 13:window.confirm("Please use Chrome version 91 or above to download large files. Do you want to attepmt anyay?")&&((c=document.createElement("a")).href="data:text/csv;charset=utf-8,"+encodeURI(JSON.stringify(n.getRsDataCleanedForTransfer())),c.target="_blank",c.download="rsData.json",c.click());case 14:case"end":return e.stop()}}),e)}))),n.toggleSettings=function(){n.setState({settingsOpen:!n.state.settingsOpen})},n.handleSetting=function(e,t){n.setState(Object(h.a)(Object(h.a)({},n.state),{},{settings:Object(h.a)(Object(h.a)({},n.state.settings),{},Object(u.a)({},e,t.currentTarget.checked))}))},n.state={settings:Object(h.a)(Object(h.a)({},{numbers:!1,showFractionalized:!1,showScore:!1,showBucket:!0,lines:!0,hideMainScore:!1,search:!0,scoreDescriptions:{impact:[{min:-10,desc:"Myth"},{min:-.1,desc:"Unsupported"},{min:.1,desc:"Weak"},{min:.5,desc:""},{min:.9,desc:"Srong"},{min:1.1,desc:"Very Srong"}],result:[{min:-10,desc:"Myth"},{min:-.1,desc:"Unsupported"},{min:.1,desc:"Possible"},{min:.5,desc:"Likely"},{min:.9,desc:"Probable"},{min:1.1,desc:"Probable"}]}}),n.props.settings),settingsOpen:!1,scoreTree:void 0,tempVisualLog:""},n}return Object(f.a)(r,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.repository.getScoreTree(this.props.scoreTreeId);case 2:t=e.sent,this.setState({scoreTree:t}),this.props.messenger.subscribe(this.handleDataDispatch),setTimeout((function(){r.props.selectId?I(r.props.selectId,r.props.repository.rsData,r.state.settings):!r.props.settings.startClosed&&t&&I(t.topScoreId,r.props.repository.rsData,r.state.settings)}),500);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"classNames",value:function(){var e="";for(var t in this.state.settings)this.state.settings[t]&&(e+="s-"+t+" ");return e}},{key:"render",value:function(){var e=this,t=this.state.settings;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:this.classNames(),children:this.state.scoreTree&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(A,{repository:this.props.repository,mainScoreId:this.state.scoreTree.topScoreId}),Object(x.jsx)(D,{scoreId:this.state.scoreTree.topScoreId,repository:this.props.repository,proMainContext:!0,messenger:this.props.messenger,settings:this.state.settings,scoreTree:this.state.scoreTree})]})}),Object(x.jsxs)("div",{className:"Content",children:[Object(x.jsxs)("div",{style:{maxWidth:"600px",margin:"10px",padding:"1rem 0 .5rem 0",opacity:.3},className:"btn-toolbar justify-content-between",role:"toolbar","aria-label":"Toolbar with button groups",children:[Object(x.jsxs)("div",{className:"btn-group mr-3",role:"group","aria-label":"Save",children:[!t.DbNotAvailable&&t.editable&&t.saveToCloud&&Object(x.jsx)("button",{onClick:this.handleSave,type:"button",value:"Submit",className:"btn btn-secondary",children:"Save to cloud"}),t.portData&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:this.handleImport,type:"button",value:"download",className:"btn btn-secondary",children:"Import"}),Object(x.jsx)("button",{onClick:this.handleExport,type:"button",value:"download",className:"btn btn-secondary",children:"Export"})]})]}),Object(x.jsx)("div",{className:"btn-group mr-3 float-right btn-settings",role:"group","aria-label":"Settings",children:Object(x.jsxs)("svg",{onClick:this.toggleSettings,style:{cursor:"pointer",height:"1em",fill:"#aaa",stroke:"none"},viewBox:"0 0 1280.000000 1280.000000",children:[Object(x.jsx)("metadata",{children:"Created by potrace 1.15, written by Peter Selinger 2001-2017"}),Object(x.jsx)("g",{transform:"translate(0,1280) scale(0.1,-0.1)",children:Object(x.jsx)("path",{d:"M5664 11538 c-38 -40 -55 -68 -68 -113 -19 -65 -44 -149 -70 -235 -9 -30 -74 -248 -145 -484 l-128 -429 -97 -33 c-176 -60 -334 -125 -503 -209 l-168 -83 -100 53 c-55 29 -154 82 -220 117 -66 36 -147 80 -180 98 -232 125 -441 239 -505 275 -41 22 -100 54 -131 70 l-57 29 -108 -101 c-60 -56 -315 -308 -568 -561 l-458 -460 54 -98 c30 -55 77 -139 103 -189 26 -49 62 -115 78 -145 17 -30 57 -103 89 -162 32 -60 86 -159 119 -220 34 -62 84 -156 112 -208 27 -52 56 -104 63 -115 8 -11 14 -26 14 -35 0 -8 -31 -76 -69 -150 -90 -176 -178 -385 -247 -587 -18 -50 -20 -52 -74 -68 -30 -10 -73 -23 -95 -30 -34 -11 -101 -31 -140 -41 -5 -2 -41 -12 -80 -24 -38 -12 -77 -23 -85 -25 -8 -2 -46 -13 -85 -25 -38 -12 -77 -23 -85 -25 -8 -2 -69 -20 -135 -40 -177 -53 -269 -81 -370 -110 -82 -24 -95 -31 -147 -83 l-57 -57 -1 -712 c0 -688 0 -713 19 -722 10 -6 56 -21 102 -35 46 -13 170 -50 274 -81 105 -31 197 -58 205 -60 8 -2 47 -14 85 -25 111 -34 154 -47 245 -73 113 -33 287 -85 326 -98 27 -8 34 -18 49 -67 79 -263 165 -482 275 -702 l68 -136 -52 -100 c-29 -54 -81 -151 -116 -214 -34 -63 -79 -146 -100 -185 -21 -38 -65 -119 -97 -180 -97 -177 -187 -344 -236 -436 l-46 -85 510 -510 509 -509 58 29 c31 17 91 49 132 71 82 46 409 224 535 291 44 24 134 72 200 109 66 36 152 82 191 102 l71 36 179 -90 c98 -50 240 -114 314 -143 74 -29 144 -56 155 -61 18 -7 175 -57 231 -74 14 -3 25 -19 32 -43 18 -63 66 -228 112 -377 11 -38 23 -77 25 -85 3 -13 70 -240 139 -470 13 -41 40 -132 61 -203 l38 -127 723 0 723 0 55 66 c31 36 56 68 57 72 1 13 8 37 29 107 12 39 23 77 25 85 2 8 13 47 25 85 12 39 23 77 25 85 2 8 13 44 24 80 11 36 63 211 116 390 53 179 100 332 105 340 4 8 48 28 97 44 156 50 363 137 548 229 l180 90 55 -29 c30 -16 118 -63 195 -105 125 -68 203 -110 445 -241 36 -20 119 -65 185 -100 66 -36 159 -86 206 -111 47 -26 92 -47 101 -47 18 0 1118 1103 1118 1122 0 7 -12 33 -26 58 -14 25 -45 81 -69 125 -23 44 -71 132 -105 195 -35 63 -138 255 -230 426 -93 170 -177 326 -189 345 -11 19 -21 41 -21 50 0 9 27 69 60 133 53 104 109 230 156 351 9 22 19 47 23 55 4 8 25 69 46 135 21 66 43 125 49 132 6 6 52 23 101 38 148 44 177 52 250 75 39 11 77 23 85 25 8 2 47 13 85 25 39 12 77 23 85 25 8 2 47 13 85 25 39 12 77 23 85 25 8 2 69 20 135 40 66 20 158 47 204 60 74 21 91 30 138 77 l53 52 0 722 0 722 -62 21 c-59 19 -325 98 -358 106 -8 2 -46 14 -85 25 -105 32 -151 46 -250 75 -49 15 -126 37 -170 50 -44 13 -118 35 -165 49 -47 13 -114 33 -150 45 l-65 20 -34 103 c-67 211 -195 507 -293 684 l-45 80 80 145 c43 79 99 182 124 229 57 106 223 413 360 665 24 44 51 95 60 113 l17 33 -499 499 c-275 275 -507 500 -515 500 -9 0 -24 -6 -35 -13 -11 -8 -58 -34 -105 -59 -90 -48 -253 -136 -447 -242 -65 -35 -145 -78 -178 -96 -92 -49 -169 -91 -302 -164 l-121 -66 -159 79 c-192 96 -331 153 -523 216 -80 26 -154 51 -166 55 -15 6 -26 29 -43 86 -33 117 -60 207 -161 544 -51 168 -102 341 -115 385 -13 44 -33 112 -45 150 -12 39 -23 78 -25 88 -2 9 -7 22 -10 27 -4 7 -260 10 -729 10 l-723 0 -49 -52z m981 -3342 c83 -16 89 -17 166 -35 248 -57 582 -231 789 -413 344 -302 557 -671 644 -1118 23 -119 27 -176 27 -362 0 -163 -9 -263 -30 -361 -6 -23 -13 -58 -16 -77 -13 -77 -89 -282 -150 -405 -178 -362 -407 -601 -735 -767 -355 -180 -750 -252 -1120 -203 -63 8 -126 17 -140 20 -14 3 -47 10 -75 16 -91 18 -310 97 -423 154 -560 280 -966 827 -1058 1425 -30 198 -30 501 1 650 3 14 8 41 11 60 31 174 128 426 228 593 120 200 230 324 406 456 216 163 515 302 745 346 73 14 203 35 240 39 83 9 412 -4 490 -18z"})})]})}),Object(x.jsx)("div",{className:"tempVisualLog",children:this.state.tempVisualLog})]}),Object(x.jsx)("div",{className:"settings-container "+(this.state.settingsOpen&&"show-settings"),children:Object(x.jsx)("div",{className:"settings-grid ",children:Object.keys(this.state.settings).map((function(t){return Object(x.jsx)("div",{children:(!0===e.state.settings[t]||!1===e.state.settings[t])&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{type:"checkbox",id:"s-"+t,checked:e.state.settings[t],onChange:e.handleSetting.bind(e,t)}),Object(x.jsx)("label",{htmlFor:"s-"+t,children:t})]})},t)}))})})]}),Object(x.jsx)("svg",{style:{display:"none"},children:Object(x.jsx)("symbol",{id:"callout",viewBox:"0 0 9 9",children:Object(x.jsx)("g",{children:Object(x.jsx)("path",{d:"m9 0h-9l9 9z"})})})}),Object(x.jsx)("svg",{height:"20px",width:"20px",style:{display:"none"},children:Object(x.jsx)("symbol",{id:"expander",viewBox:"0 0 10 10",children:Object(x.jsx)("g",{children:Object(x.jsx)("path",{d:"m1 1 7 4-7 4z"})})})})]})}}]),r}(s.Component),W=function(e){var t=e.scoreTreeId,r=e.repository,n=e.messenger,a=e.settings,c=e.selectId;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(F,{repository:r,scoreTreeId:t,messenger:n,settings:a,selectId:c})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(){return(L=Object(i.a)(a.a.mark((function e(){var t,r,n,i,s,o,l,u,h,p,f,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.RsRepository?window.RsRepository:new g.RepositoryLocalPure,window.RsRepository=t,r=window.RsMessenger?window.RsMessenger:new g.Messenger,window.RsMessenger=r,n=window.RsSettings?window.RsSettings:{},window.RsSettings=n,window.RsCalculateScoreActions=g.calculateScoreActions,null===n.dbCollection&&(n.dbCollection="rsData"),window.RsActions||(window.RsActions=[{newData:{content:'This is a new claim.\n\n.\n* Select the "edit this claim" button below to change this text.\n* Select the "add a pro or con" button to add additional claims.\n* Select the "Import" and "Export" buttons at the bottom to save a copy to your device.',id:"mainClaim",type:"claim"},type:"add_claim",dataId:"mainClaim"},{newData:{sourceClaimId:"mainClaim",topScoreId:"mainScore",id:"ScoreTree",type:"scoreTree"},type:"add_scoreTree",dataId:"ScoreTree"}]),!window.RsDatabase){e.next=13;break}return e.next=12,window.RsDatabase.doc(n.dbCollection).get();case 12:i=e.sent;case 13:if(!i||!i.exists){e.next=17;break}t.rsData=i.data(),e.next=21;break;case 17:if(!window.RsActions){e.next=21;break}return e.next=20,t.notify(window.RsActions);case 20:n.DbNotAvailable=!0;case 21:s=document.getElementsByTagName("rs-score"),o=Object(c.a)(s),e.prev=23,o.s();case 25:if((l=o.n()).done){e.next=40;break}return u=l.value,h=u.getAttribute("score-tree-Id"),p="",h&&(p=h),e.next=32,t.getScoreTree(p);case 32:if(!(f=e.sent)){e.next=36;break}return e.next=36,Object(g.calculateScoreActions)({actions:[new g.Action(f,void 0,"add_scoreTree")],repository:t});case 36:b=new URL(window.location.href).searchParams.get("s"),d.a.render(Object(x.jsx)(W,{scoreTreeId:p,repository:t,messenger:r,settings:window.RsSettings,selectId:b}),u);case 38:e.next=25;break;case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(23),o.e(e.t0);case 45:return e.prev=45,o.f(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[23,42,45,48]])})))).apply(this,arguments)}window.rsStartApp=function(){return L.apply(this,arguments)},"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[93,1,2]]]);
//# sourceMappingURL=main.791fbb8a.chunk.js.map