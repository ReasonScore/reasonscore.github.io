(this.webpackJsonpeditor=this.webpackJsonpeditor||[]).push([[0],{25:function(e,t,a){e.exports=a(54)},30:function(e,t,a){},31:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(24),l=a.n(r),o=(a(30),a(31),a(4)),c=a(5),s=a(7),d=a(6),m=a(8),p=a(1),u=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).claim=a.props.repository.getItem(a.props.claimId)||new p.Claim,a.claimEdge=a.props.claimEdge,a.handleSubmit=function(){var e=[new p.Change(new p.Claim(a.state.content,a.claim.id))];a.claimEdge&&e.push(new p.Change(new p.ClaimEdge(a.claimEdge.parentId,a.claimEdge.childId,void 0,a.state.pro,a.claimEdge.id))),a.props.calculationInitator.notify(e),a.props.handleEditClose()},a.handleContent=function(e){a.setState({content:e.currentTarget.value})},a.handlePro=function(e){a.setState({pro:e.currentTarget.checked})},a.handleAffects=function(e){a.setState({affects:e.currentTarget.value})},a.handleDelete=function(){var e=a.props.repository.rsData;if(a.claimEdge){var t=e.claimEdgesByParentId[a.claimEdge.parentId.toString()],n=t.indexOf(a.claimEdge.id.toString(),0);n>-1&&t.splice(n,1);var i=JSON.parse(JSON.stringify(e.items[a.claimEdge.parentId.toString()][0]));a.props.calculationInitator.notify([new p.Change(i)]),a.props.handleEditClose()}},a.handleCancel=function(){a.props.handleEditClose()},a.props.new&&(a.claim=new p.Claim,a.claimEdge=new p.ClaimEdge(a.props.claimId,a.claim.id)),a.state={content:a.claim.content,pro:a.claimEdge?a.claimEdge.pro:void 0,affects:a.claimEdge?a.claimEdge.affects.toString():void 0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("form",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"content"},"Content"),i.a.createElement("textarea",{className:"form-control",id:"claim.content",value:this.state.content,onChange:this.handleContent,rows:2}),i.a.createElement("small",{className:"form-text text-muted"},"For hyperlinks us ",i.a.createElement("a",{href:"https://spec.commonmark.org/0.29/#links"},"commonMark")," syntax: This is [an example](http://example.com/) inline link.")),this.claimEdge&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"form-group form-check"},i.a.createElement("input",{type:"checkbox",id:"claimEdge.pro",checked:this.state.pro,onChange:this.handlePro}),i.a.createElement("label",null," Pro Parent")),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Affects:",i.a.createElement("select",{id:"claimEdge.affects",value:this.state.affects,onChange:this.handleAffects},i.a.createElement("option",{value:p.Affects.Confidence},"Confidence"),i.a.createElement("option",{value:p.Affects.Relevance},"Relevance")))),i.a.createElement("div",{className:"btn-group mr-2",role:"group","aria-label":"Third group"},i.a.createElement("button",{type:"button",value:"Delete",className:"btn btn-secondary",onClick:this.handleDelete},"Delete"))),i.a.createElement("div",{className:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},i.a.createElement("div",{className:"btn-group mr-2",role:"group","aria-label":"First group"},i.a.createElement("button",{type:"button",value:"Submit",className:"btn btn-primary",onClick:this.handleSubmit},"Submit")),i.a.createElement("div",{className:"btn-group mr-2",role:"group","aria-label":"Second group"},i.a.createElement("button",{type:"button",value:"Cancel",className:"btn btn-secondary",onClick:this.handleCancel},"Cancel"))))}}]),t}(i.a.Component),h=a(39),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).handleDataDispatch=function(e){var t=!0,n=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var o=r.value.newItem,c={};if(o.id===a.props.claimId&&o.type===p.Type.claim){var s=o;c.claim=s}if(o.id===a.state.score.id&&o.type===p.Type.score){var d=o;c.score=d}if(a.state.claimEdge&&o.id===a.state.claimEdge.id&&o.type===p.Type.claimEdge){var m=o;c.claimEdge=m}a.setState(c)}}catch(u){n=!0,i=u}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}},a.handleExpanderClick=function(){a.setState({childrenVisible:!a.state.childrenVisible})},a.handleEditButtonClick=function(){a.setState({editorVisible:!a.state.editorVisible,addMode:!1})},a.handleAddButtonClick=function(){a.setState({addMode:!0,editorVisible:!a.state.editorVisible})},a.handleEditClose=function(){a.setState({editorVisible:!1})},a.state={childrenVisible:!a.props.claimEdge,editorVisible:!1,addMode:!1,score:a.props.repository.getScoreBySourceClaimId(a.props.claimId),claim:a.props.repository.getItem(a.props.claimId)||new p.Claim,childClaimEedges:a.props.repository.getClaimEdgesByParentId(a.props.claimId),claimEdge:a.props.claimEdge},a.props.messenger.subscribe(a.handleDataDispatch),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.props.messenger.unsubscribe(this.handleDataDispatch)}},{key:"render",value:function(){var e=this.props,a=this.state.score,n=this.state.claim,r=this.props.repository.getClaimEdgesByParentId(this.props.claimId),l=e.proMainContext,o="".concat(Math.round(100*this.state.score.confidence),"%");this.state.claimEdge&&(this.state.claimEdge.pro||(l=!l),o=this.state.claimEdge.affects===p.Affects.Relevance?"\xd7".concat((a.relevance+1).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1})):"".concat(Math.round(a.confidence*a.relevance*100)));var c=l?"pro":"con";return i.a.createElement("div",{className:"claim-outer"},i.a.createElement("div",{className:"claim "+c},i.a.createElement("div",{className:"editor-button",onClick:this.handleEditButtonClick},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"15",viewBox:"0 0 48 48",width:"15"},i.a.createElement("path",{d:"M6 34.5v7.5h7.5l22.13-22.13-7.5-7.5-22.13 22.13zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z"}),i.a.createElement("path",{d:"M0 0h48v48h-48z",fill:"none"}))),i.a.createElement("div",{className:"add-button",onClick:this.handleAddButtonClick},"+"),r.length>0&&i.a.createElement("div",{className:"expander"+(this.state.childrenVisible?" expanded":" collapsed"),onClick:this.handleExpanderClick},"\u25e5"),i.a.createElement("div",{className:"claim-inner"},i.a.createElement("span",{className:"score"},o),i.a.createElement("span",{dangerouslySetInnerHTML:function(){var e=new h.Parser({}),t=new h.HtmlRenderer({safe:!0}),a=e.parse(n.content);return{__html:t.render(a)}}()}))),this.state.editorVisible&&i.a.createElement(u,{claimId:n.id,repository:e.repository,calculationInitator:e.calculationInitator,claimEdge:this.state.claimEdge,proMainContext:l,handleEditClose:this.handleEditClose,messenger:e.messenger,new:this.state.addMode}),this.state.childrenVisible&&i.a.createElement("ul",{className:"children"},r.length>0&&r.map((function(a){return i.a.createElement("li",{key:a.childId.toString()},i.a.createElement(t,{claimId:a.childId,repository:e.repository,calculationInitator:e.calculationInitator,claimEdge:a,proMainContext:l,messenger:e.messenger}))}))))}}]),t}(i.a.Component),f=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).handleSave=function(){window.db.doc("rsData").set(JSON.parse(JSON.stringify(a.props.repository.rsData))).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("button",{type:"button",value:"Save",className:"btn btn-secondary",onClick:this.handleSave},"Save")}}]),t}(i.a.Component),E=function(e){var t=e.claimId,a=e.repository,n=e.calculationInitator,r=e.messenger;return i.a.createElement(i.a.Fragment,null,i.a.createElement(f,{repository:a}),i.a.createElement(g,{claimId:t,repository:a,calculationInitator:n,proMainContext:!0,messenger:r}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=new p.Repository,v=new p.Messenger,y=new p.CalculationInitator(b,v.notify),C=new p.Claim("Not From Database",Object(p.ID)("Yk3JDShDv0lm"));C.reversible=!0,y.notify([new p.Change(C)]),window.db.doc("rsData").get().then((function(e){if(e.exists){b.rsData=e.data();var t=document.getElementsByTagName("rs-claim"),a=!0,n=!1,r=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value,d=s.getAttribute("claimId"),m=Object(p.ID)("");d&&(m=Object(p.ID)(d)),l.a.render(i.a.createElement(E,{claimId:m,repository:b,calculationInitator:y,messenger:v}),s)}}catch(u){n=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}}else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.3f084fe1.chunk.js.map